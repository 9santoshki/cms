{"version":3,"sources":["turbopack:///[project]/src/app/moderator/page.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/moderator/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/moderator/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/moderator/page.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from '@/context/AppContext';\nimport Header from '@/components/Header';\nimport Footer from '@/components/Footer';\n\ninterface Product {\n  id: number;\n  name: string;\n  description: string;\n  price: number;\n  category: string;\n  image_url?: string;\n  imageClass?: string;\n}\n\ninterface Review {\n  id: number;\n  user_name: string;\n  product_name: string;\n  rating: number;\n  comment: string;\n  created_at: string;\n}\n\ninterface Order {\n  id: number;\n  customer_name: string;\n  total: number;\n  status: string;\n  created_at: string;\n  item_count: number;\n}\n\ninterface Payment {\n  id: number;\n  transaction_id: string;\n  order_id: number;\n  amount: number;\n  status: string;\n  created_at: string;\n  user_name: string;\n}\n\n// Define types for moderator permissions\ninterface Permissions {\n  can_edit_products: boolean;\n  can_edit_reviews: boolean;\n  can_edit_orders: boolean;\n  can_edit_payments: boolean;\n}\n\n// Extend the User type from context if needed\ninterface ExtendedUser {\n  id: string | number;\n  name: string;\n  email: string;\n  role: string;\n  permissions?: Permissions;\n  created_at?: string;\n  updated_at?: string;\n  avatar?: string;\n  googleId?: string;\n  phone?: string;\n  address?: string;\n  city?: string;\n  country?: string;\n  postal_code?: string;\n  orders?: any[];\n}\n\nconst ModeratorDashboard = () => {\n  const { user: currentUser, token, loading } = useAppContext();\n  const [activeTab, setActiveTab] = useState('products');\n  const [products, setProducts] = useState<Product[]>([]);\n  const [reviews, setReviews] = useState<Review[]>([]);\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [payments, setPayments] = useState<Payment[]>([]);\n  const [selectedItem, setSelectedItem] = useState<any>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState<any>({});\n  const [showCreateModeratorForm, setShowCreateModeratorForm] = useState(false);\n  const [newModeratorData, setNewModeratorData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    permissions: {\n      can_edit_products: false,\n      can_edit_reviews: true,\n      can_edit_orders: true,\n      can_edit_payments: false,\n    }\n  });\n\n  useEffect(() => {\n    if (!currentUser || (currentUser.role !== 'admin' && currentUser.role !== 'moderator')) {\n      window.location.href = '/auth';\n    }\n  }, [currentUser]);\n\n  useEffect(() => {\n    if (currentUser && (currentUser.role === 'admin' || currentUser.role === 'moderator')) {\n      fetchData();\n    }\n  }, [activeTab, currentUser]);\n\n  const fetchData = async () => {\n    try {\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      };\n\n      switch(activeTab) {\n        case 'products':\n          if (currentUser?.permissions?.can_edit_products) {\n            const res = await fetch('/api/products', { headers });\n            const data = await res.json();\n            if (data.success) setProducts(data.data);\n          }\n          break;\n        case 'reviews':\n          if (currentUser?.permissions?.can_edit_reviews) {\n            const res = await fetch('/api/reviews', { headers });\n            const data = await res.json();\n            if (data.success) setReviews(data.data);\n          }\n          break;\n        case 'orders':\n          if (currentUser?.permissions?.can_edit_orders) {\n            const res = await fetch('/api/orders', { headers });\n            const data = await res.json();\n            if (data.success) setOrders(data.data);\n          }\n          break;\n        case 'payments':\n          if (currentUser?.permissions?.can_edit_payments) {\n            const res = await fetch('/api/payments', { headers });\n            const data = await res.json();\n            if (data.success) setPayments(data.data);\n          }\n          break;\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n\n  const handleEdit = (item: any, type?: string) => {\n    // item may already include a `type` property (e.g. { ...product, type: 'product' })\n    setSelectedItem(item);\n    setEditData({ ...item });\n    setIsEditing(true);\n  };\n\n  const handleSave = async () => {\n    try {\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      };\n\n      let endpoint, method;\n      switch(selectedItem.type) {\n        case 'product':\n          endpoint = `/api/products/${selectedItem.id}`;\n          method = 'PUT';\n          break;\n        case 'review':\n          endpoint = `/api/reviews/${selectedItem.id}`;\n          method = 'PUT';\n          break;\n        case 'order':\n          endpoint = `/api/orders/${selectedItem.id}`;\n          method = 'PUT';\n          break;\n        case 'payment':\n          endpoint = `/api/payments/${selectedItem.id}`;\n          method = 'PUT';\n          break;\n        default:\n          return;\n      }\n\n      const response = await fetch(endpoint, {\n        method,\n        headers,\n        body: JSON.stringify(editData)\n      });\n\n      const result = await response.json();\n      if (result.success) {\n        setIsEditing(false);\n        setSelectedItem(null);\n        fetchData(); // Refresh the data\n      }\n    } catch (error) {\n      console.error('Error saving data:', error);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setEditData((prev: any) => ({ ...prev, [name]: value }));\n  };\n\n  const handleNewModeratorChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value, type, checked } = e.target as HTMLInputElement;\n    if (type === 'checkbox') {\n      setNewModeratorData((prev: any) => ({\n        ...prev,\n        permissions: {\n          ...prev.permissions,\n          [name]: checked\n        }\n      }));\n    } else {\n      setNewModeratorData((prev: any) => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n\n  const handleCreateModerator = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      };\n\n      const response = await fetch('/api/admin/create-moderator', {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(newModeratorData)\n      });\n\n      const result = await response.json();\n      \n      if (result.success) {\n        alert('Moderator created successfully!');\n        setNewModeratorData({\n          name: '',\n          email: '',\n          password: '',\n          permissions: {\n            can_edit_products: false,\n            can_edit_reviews: true,\n            can_edit_orders: true,\n            can_edit_payments: false,\n          }\n        });\n        setShowCreateModeratorForm(false);\n      } else {\n        alert(result.error || 'Error creating moderator');\n      }\n    } catch (error) {\n      console.error('Error creating moderator:', error);\n      alert('Error creating moderator');\n    }\n  };\n\n  if (loading.user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const user = currentUser as ExtendedUser | null;\n\n  if (!user || (user.role !== 'admin' && user.role !== 'moderator')) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center p-8 bg-white rounded-xl shadow-lg max-w-md border border-gray-100\">\n          <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4\">\n            <svg className=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n            </svg>\n          </div>\n          <h2 className=\"text-xl font-bold text-gray-900\">Access Denied</h2>\n          <p className=\"mt-2 text-gray-600\">You don't have permission to access this page.</p>\n          <button\n            className=\"mt-6 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 shadow-lg\"\n            onClick={() => window.location.href = '/auth'}\n          >\n            Return to Login\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header activePage=\"moderator\" />\n\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Moderator Dashboard</h1>\n          <p className=\"text-gray-600\">Manage products, reviews, orders, and payments</p>\n        </div>\n\n        <div className=\"bg-white rounded-xl shadow-lg p-6\">\n          {user.role === 'admin' && (\n            <div className=\"mb-6\">\n              <button\n                className={`px-4 py-2 rounded-lg transition-colors ${\n                  showCreateModeratorForm\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-blue-100 text-blue-700 hover:bg-blue-200'\n                }`}\n                onClick={() => setShowCreateModeratorForm(!showCreateModeratorForm)}\n              >\n                {showCreateModeratorForm ? 'Hide Create Moderator' : 'Create New Moderator'}\n              </button>\n            </div>\n          )}\n\n          {showCreateModeratorForm && user.role === 'admin' && (\n            <div className=\"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200\">\n              <h2 className=\"text-xl font-semibold mb-4\">Create New Moderator</h2>\n              <form onSubmit={handleCreateModerator}>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Name</label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      value={newModeratorData.name}\n                      onChange={handleNewModeratorChange}\n                      className=\"w-full p-2 border border-gray-300 rounded-md\"\n                      required\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n                    <input\n                      type=\"email\"\n                      name=\"email\"\n                      value={newModeratorData.email}\n                      onChange={handleNewModeratorChange}\n                      className=\"w-full p-2 border border-gray-300 rounded-md\"\n                      required\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n                    <input\n                      type=\"password\"\n                      name=\"password\"\n                      value={newModeratorData.password}\n                      onChange={handleNewModeratorChange}\n                      className=\"w-full p-2 border border-gray-300 rounded-md\"\n                      required\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"mb-4\">\n                  <h3 className=\"text-lg font-medium mb-2\">Permissions</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        name=\"can_edit_products\"\n                        checked={newModeratorData.permissions.can_edit_products}\n                        onChange={handleNewModeratorChange}\n                        className=\"mr-2\"\n                      />\n                      Can Edit Products\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        name=\"can_edit_reviews\"\n                        checked={newModeratorData.permissions.can_edit_reviews}\n                        onChange={handleNewModeratorChange}\n                        className=\"mr-2\"\n                      />\n                      Can Edit Reviews\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        name=\"can_edit_orders\"\n                        checked={newModeratorData.permissions.can_edit_orders}\n                        onChange={handleNewModeratorChange}\n                        className=\"mr-2\"\n                      />\n                      Can Edit Orders\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        name=\"can_edit_payments\"\n                        checked={newModeratorData.permissions.can_edit_payments}\n                        onChange={handleNewModeratorChange}\n                        className=\"mr-2\"\n                      />\n                      Can Edit Payments\n                    </label>\n                  </div>\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600\"\n                >\n                  Create Moderator\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setShowCreateModeratorForm(false)}\n                  className=\"ml-2 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400\"\n                >\n                  Cancel\n                </button>\n              </form>\n            </div>\n          )}\n\n          <div className=\"flex flex-wrap gap-4 mb-6 border-b pb-4\">\n            {user.permissions?.can_edit_products && (\n              <button\n                className={`px-4 py-2 rounded-lg transition-colors ${\n                  activeTab === 'products'\n                    ? 'bg-amber-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n                onClick={() => setActiveTab('products')}\n              >\n                Products\n              </button>\n            )}\n            {user.permissions?.can_edit_reviews && (\n              <button\n                className={`px-4 py-2 rounded-lg transition-colors ${\n                  activeTab === 'reviews'\n                    ? 'bg-amber-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n                onClick={() => setActiveTab('reviews')}\n              >\n                Reviews\n              </button>\n            )}\n            {user.permissions?.can_edit_orders && (\n              <button\n                className={`px-4 py-2 rounded-lg transition-colors ${\n                  activeTab === 'orders'\n                    ? 'bg-amber-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n                onClick={() => setActiveTab('orders')}\n              >\n                Orders\n              </button>\n            )}\n            {user.permissions?.can_edit_payments && (\n              <button\n                className={`px-4 py-2 rounded-lg transition-colors ${\n                  activeTab === 'payments'\n                    ? 'bg-amber-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n                onClick={() => setActiveTab('payments')}\n              >\n                Payments\n              </button>\n            )}\n          </div>\n\n          {isEditing ? (\n            <div className=\"p-6 bg-gray-50 rounded-lg\">\n              <h2 className=\"text-xl font-semibold mb-4\">Edit {selectedItem?.type || 'Item'}</h2>\n              {selectedItem && Object.keys(editData).map(key => (\n                !['id', 'created_at', 'type'].includes(key) && (\n                  <div key={key} className=\"mb-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1 capitalize\">{key}</label>\n                    <input\n                      type=\"text\"\n                      name={key}\n                      value={editData[key]}\n                      onChange={handleInputChange}\n                      className=\"w-full p-2 border border-gray-300 rounded-md\"\n                    />\n                  </div>\n                )\n              ))}\n              <div className=\"flex space-x-4\">\n                <button\n                  className=\"px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600\"\n                  onClick={handleSave}\n                >\n                  Save\n                </button>\n                <button\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400\"\n                  onClick={() => setIsEditing(false)}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div>\n              {activeTab === 'products' && user.permissions?.can_edit_products && (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">ID</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Category</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {products.map(product => (\n                        <tr key={product.id}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{product.id}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{product.name}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">₹{product.price}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{product.category}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                            <button\n                              onClick={() => handleEdit({ ...product, type: 'product' })}\n                              className=\"text-amber-600 hover:text-amber-900 mr-3\"\n                            >\n                              Edit\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n\n              {activeTab === 'reviews' && user.permissions?.can_edit_reviews && (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">User</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Rating</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Comment</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {reviews.map(review => (\n                        <tr key={review.id}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{review.user_name}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{review.product_name}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{review.rating}</td>\n                          <td className=\"px-6 py-4 text-sm text-gray-500 max-w-xs truncate\">{review.comment}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                            <button\n                              onClick={() => handleEdit({ ...review, type: 'review' })}\n                              className=\"text-amber-600 hover:text-amber-900 mr-3\"\n                            >\n                              Edit\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n\n              {activeTab === 'orders' && user.permissions?.can_edit_orders && (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order ID</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Total</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {orders.map(order => (\n                        <tr key={order.id}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{order.id}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{order.customer_name}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">₹{order.total}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                              order.status === 'completed' ? 'bg-green-100 text-green-800' :\n                              order.status === 'processing' ? 'bg-yellow-100 text-yellow-800' :\n                              'bg-gray-100 text-gray-800'\n                            }`}>\n                              {order.status}\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                            <button\n                              onClick={() => handleEdit({ ...order, type: 'order' })}\n                              className=\"text-amber-600 hover:text-amber-900 mr-3\"\n                            >\n                              Edit\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n\n              {activeTab === 'payments' && user.permissions?.can_edit_payments && (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Transaction ID</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order ID</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Amount</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {payments.map(payment => (\n                        <tr key={payment.id}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{payment.transaction_id}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{payment.order_id}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">₹{payment.amount}</td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                              payment.status === 'completed' ? 'bg-green-100 text-green-800' :\n                              payment.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                              payment.status === 'failed' ? 'bg-red-100 text-red-800' :\n                              'bg-gray-100 text-gray-800'\n                            }`}>\n                              {payment.status}\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                            <button\n                              onClick={() => handleEdit({ ...payment, type: 'payment' })}\n                              className=\"text-amber-600 hover:text-amber-900 mr-3\"\n                            >\n                              Edit\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default ModeratorDashboard;"],"names":["React","useState","useEffect","useAppContext","Header","Footer","Product","id","name","description","price","category","image_url","imageClass","Review","user_name","product_name","rating","comment","created_at","Order","customer_name","total","status","item_count","Payment","transaction_id","order_id","amount","Permissions","can_edit_products","can_edit_reviews","can_edit_orders","can_edit_payments","ExtendedUser","email","role","permissions","updated_at","avatar","googleId","phone","address","city","country","postal_code","orders","ModeratorDashboard","user","currentUser","token","loading","activeTab","setActiveTab","products","setProducts","reviews","setReviews","setOrders","payments","setPayments","selectedItem","setSelectedItem","isEditing","setIsEditing","editData","setEditData","showCreateModeratorForm","setShowCreateModeratorForm","newModeratorData","setNewModeratorData","password","window","location","href","fetchData","headers","res","fetch","data","json","success","error","console","handleEdit","item","type","handleSave","endpoint","method","response","body","JSON","stringify","result","handleInputChange","e","ChangeEvent","HTMLInputElement","HTMLTextAreaElement","value","target","prev","handleNewModeratorChange","checked","handleCreateModerator","FormEvent","preventDefault","alert","Object","keys","map","key","includes","product","review","order","payment"],"mappings":"2UAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,4RAA8R,EAC3T,2DACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,wQAA0Q,EACvS,uCACA","ignoreList":[0]}