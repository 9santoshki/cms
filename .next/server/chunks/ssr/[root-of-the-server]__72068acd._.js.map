{"version":3,"sources":["turbopack:///[project]/src/components/EnhancedCartPage.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/components/EnhancedCartPage.tsx","turbopack:///[project]/src/app/cart/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/EnhancedCartPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/EnhancedCartPage.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useCartStore } from '../store/cartStore';\nimport Header from './Header';\nimport Footer from './Footer';\nimport { calculateCartTotal, calculateShippingCost, calculateOriginalCartTotal, calculateDiscountSavings } from '../utils/cartUtils';\nimport {\n  CartContainer,\n  CartHeaderSection,\n  EmptyCartSection,\n  EmptyCartContent,\n  CartContentWrapper,\n  CartItemsSection,\n  CartItemsHeader,\n  CartItemsList,\n  CartItem,\n  ItemProduct,\n  ItemImage,\n  ItemDetails,\n  ItemPrice,\n  ItemQuantity,\n  ItemTotal,\n  ItemActions,\n  CartSummarySection,\n  CartSummary,\n  SummaryItemsList,\n  SummaryItem,\n  SummaryDetails,\n  SummaryActions\n} from '../styles/ElegantCartStyles';\n\nconst EnhancedCartPage = () => {\n  const router = useRouter();\n  const cartItems = useCartStore(state => state.items);\n  const updateCartItem = useCartStore(state => state.updateItem);\n  const removeFromCart = useCartStore(state => state.removeItem);\n\n  const navigate = (path: string) => {\n    router.push(path);\n  };\n\n  const updateQuantity = (productId: number, newQuantity: number) => {\n    if (newQuantity < 1) {\n      // If quantity is less than 1, remove the item\n      removeFromCart(productId);\n      return;\n    }\n    updateCartItem(productId, newQuantity);\n  };\n\n  const subtotal = calculateCartTotal(cartItems);\n  const shipping = calculateShippingCost(subtotal);\n  const total = subtotal + shipping;\n\n  const handleCheckout = () => {\n    if (cartItems.length > 0) {\n      navigate('/checkout');\n    }\n  };\n\n  const continueShopping = () => {\n    navigate('/shop');\n  };\n\n  if (cartItems.length === 0) {\n    return (\n      <CartContainer>\n        <Header activePage=\"cart\" />\n        <CartHeaderSection>\n          <h1>Shopping Cart</h1>\n        </CartHeaderSection>\n        <EmptyCartSection>\n          <EmptyCartContent>\n            <i className=\"fas fa-shopping-cart empty-cart-icon\"></i>\n            <h2>Your cart is empty</h2>\n            <p>Looks like you haven't added any items to your cart yet.</p>\n            <button className=\"btn primary\" onClick={continueShopping}>\n              Continue Shopping\n            </button>\n          </EmptyCartContent>\n        </EmptyCartSection>\n        <Footer />\n      </CartContainer>\n    );\n  }\n\n  return (\n    <CartContainer>\n      <Header activePage=\"cart\" />\n      <CartHeaderSection>\n        <h1>Shopping Cart</h1>\n      </CartHeaderSection>\n\n      <CartContentWrapper>\n        <CartItemsSection>\n          <CartItemsHeader>\n            <div className=\"header-item\">Product</div>\n            <div className=\"header-price\">Price</div>\n            <div className=\"header-quantity\">Quantity</div>\n            <div className=\"header-total\">Total</div>\n            <div className=\"header-actions\"></div>\n          </CartItemsHeader>\n\n          <CartItemsList>\n            {cartItems.map((item, index) => {\n              // Create a unique key to avoid duplicate key errors\n              // Use product_id first (most reliable), then id, then index as fallback\n              const uniqueKey = item.product_id ? `prod-${item.product_id}` :\n                               item.id ? `item-${item.id}-${index}` :\n                               `idx-${index}`;\n\n              const productId = item.product_id || item.id;\n\n              if (!productId) {\n                console.error('Cart item missing product_id and id:', item);\n                return null;\n              }\n\n              return (\n                <CartItem key={uniqueKey}>\n                  <ItemProduct>\n                    <ItemImage\n                      $imageUrl={item.image_url}\n                      $imageClass={item.imageClass || 'modern'}\n                    />\n                    <ItemDetails>\n                      <h3>{item.name}</h3>\n                      <p>{item.description}</p>\n                    </ItemDetails>\n                  </ItemProduct>\n\n                  <ItemPrice>\n                    ₹{typeof item.price === 'number'\n                      ? item.price.toLocaleString()\n                      : parseFloat(item.price || '0').toLocaleString()}\n                  </ItemPrice>\n\n                  <ItemQuantity>\n                    <button\n                      className=\"quantity-btn\"\n                      onClick={() => updateQuantity(productId, item.quantity - 1)}\n                    >\n                      <i className=\"fas fa-minus\"></i>\n                    </button>\n                    <span className=\"quantity\">{item.quantity}</span>\n                    <button\n                      className=\"quantity-btn\"\n                      onClick={() => updateQuantity(productId, item.quantity + 1)}\n                    >\n                      <i className=\"fas fa-plus\"></i>\n                    </button>\n                  </ItemQuantity>\n\n                  <ItemTotal>\n                    ₹{typeof item.price === 'number'\n                      ? (item.price * item.quantity).toLocaleString()\n                      : (parseFloat(item.price || '0') * item.quantity).toLocaleString()}\n                  </ItemTotal>\n\n                  <ItemActions>\n                    <button\n                      className=\"remove-btn\"\n                      onClick={() => removeFromCart(productId)}\n                    >\n                      <i className=\"fas fa-trash-alt\"></i>\n                    </button>\n                  </ItemActions>\n                </CartItem>\n              );\n            })}\n          </CartItemsList>\n        </CartItemsSection>\n\n        <CartSummarySection>\n          <CartSummary>\n            <h2>Order Summary</h2>\n\n            <SummaryItemsList>\n              {cartItems.map((item, index) => {\n                const uniqueKey = item.product_id ? `sum-${item.product_id}` :\n                                 item.id ? `sum-${item.id}-${index}` :\n                                 `sum-idx-${index}`;\n\n                // Check if image_url is valid (not a placeholder URL)\n                const hasValidImage = item.image_url &&\n                                     !item.image_url.includes('r2-placeholder.com');\n\n                return (\n                  <SummaryItem key={uniqueKey}>\n                    {hasValidImage ? (\n                      <img\n                        src={item.image_url}\n                        alt={item.name}\n                        className=\"item-image\"\n                        onError={(e) => {\n                          e.currentTarget.style.display = 'none';\n                          if (e.currentTarget.nextSibling) {\n                            (e.currentTarget.nextSibling as HTMLElement).style.display = 'flex';\n                          }\n                        }}\n                      />\n                    ) : null}\n                    <div\n                      className=\"item-image item-placeholder\"\n                      style={{ display: hasValidImage ? 'none' : 'flex' }}\n                    >\n                      <i className=\"fas fa-image\"></i>\n                    </div>\n                    <div className=\"item-info\">\n                      <h4>{item.name}</h4>\n                      <div className=\"item-details\">\n                        <span className=\"qty\">Qty: {item.quantity}</span>\n                        <span className=\"price\">\n                          ₹{(typeof item.price === 'number' ? item.price : parseFloat(item.price || '0')).toLocaleString()}\n                        </span>\n                      </div>\n                    </div>\n                  </SummaryItem>\n                );\n              })}\n            </SummaryItemsList>\n\n            <SummaryDetails>\n              <div className=\"summary-row\">\n                <span>Subtotal</span>\n                <span>₹{subtotal.toLocaleString()}</span>\n              </div>\n              <div className=\"summary-row\">\n                <span>Shipping</span>\n                <span>{shipping === 0 ? 'FREE' : `₹${shipping.toLocaleString()}`}</span>\n              </div>\n              <div className=\"summary-row total\">\n                <span>Total</span>\n                <span>₹{total.toLocaleString()}</span>\n              </div>\n            </SummaryDetails>\n\n            <SummaryActions>\n              <button\n                className=\"btn primary\"\n                onClick={handleCheckout}\n                disabled={cartItems.length === 0}\n                style={{ width: '100%' }}\n              >\n                Proceed to Checkout\n              </button>\n            </SummaryActions>\n          </CartSummary>\n\n          <div style={{ padding: '0 30px', width: '100%', boxSizing: 'border-box' }}>\n            <button className=\"btn secondary\" onClick={continueShopping} style={{ width: '100%', boxSizing: 'border-box' }}>\n              <i className=\"fas fa-arrow-left\"></i> Continue Shopping\n            </button>\n          </div>\n        </CartSummarySection>\n      </CartContentWrapper>\n\n      <Footer />\n    </CartContainer>\n  );\n};\n\nexport default EnhancedCartPage;","import EnhancedCartPage from '@/components/EnhancedCartPage'\n\nexport default function Cart() {\n  return <EnhancedCartPage />\n}"],"names":["React","useRouter","useCartStore","Header","Footer","calculateCartTotal","calculateShippingCost","calculateOriginalCartTotal","calculateDiscountSavings","CartContainer","CartHeaderSection","EmptyCartSection","EmptyCartContent","CartContentWrapper","CartItemsSection","CartItemsHeader","CartItemsList","CartItem","ItemProduct","ItemImage","ItemDetails","ItemPrice","ItemQuantity","ItemTotal","ItemActions","CartSummarySection","CartSummary","SummaryItemsList","SummaryItem","SummaryDetails","SummaryActions","EnhancedCartPage","router","cartItems","state","items","updateCartItem","updateItem","removeFromCart","removeItem","navigate","path","push","updateQuantity","productId","newQuantity","subtotal","shipping","total","handleCheckout","length","continueShopping","map","item","index","uniqueKey","product_id","id","console","error","image_url","imageClass","name","description","price","toLocaleString","parseFloat","quantity","hasValidImage","includes","e","currentTarget","style","display","nextSibling","HTMLElement","width","padding","boxSizing","Cart"],"mappings":"iYAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qSAAuS,EACpU,oEACA,6DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,iRAAmR,EAChT,gDACA,kIELJ,EAA6B,CAAtB+B,CAAqD,CAAA,CAAA,OAE7C,IAF6C,EAArC,GAECgD,GAFK,CAEDA,AAC1B,CAD0B,EAAG,GACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAgB,CAAA,CAAG,EAC7B","ignoreList":[0]}