{"version":3,"sources":["turbopack:///[project]/src/app/dashboard/appointments/page.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/dashboard/appointments/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard/appointments/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard/appointments/page.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport DashboardLayout from '@/components/DashboardLayout';\n\nconst DashboardAppointmentsPage = () => {\n  const router = useRouter();\n  const { user } = useAuth();\n  const [appointments, setAppointments] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n\n  useEffect(() => {\n    if (!user) {\n      router.push('/auth?redirect=/dashboard/appointments');\n      return;\n    }\n\n    if (user.role !== 'admin' && user.role !== 'moderator') {\n      router.push('/dashboard');\n      return;\n    }\n\n    fetchAppointments();\n  }, [user]);\n\n  const fetchAppointments = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/appointments');\n      const data = await response.json();\n      if (data.success) {\n        setAppointments(Array.isArray(data.data) ? data.data : []);\n      } else {\n        setAppointments([]);\n      }\n    } catch (error) {\n      console.error('Error fetching appointments:', error);\n      setAppointments([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateAppointmentStatus = async (appointmentId: string, newStatus: string) => {\n    try {\n      const response = await fetch(`/api/appointments/${appointmentId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ status: newStatus })\n      });\n\n      if (response.ok) {\n        setAppointments(prev =>\n          prev.map(app =>\n            app.id === appointmentId ? { ...app, status: newStatus } : app\n          )\n        );\n      }\n    } catch (error) {\n      console.error('Error updating appointment status:', error);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-IN', {\n      weekday: 'short',\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (!user || loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: 'linear-gradient(135deg, #f8f4f0 0%, #efe9e3 100%)'\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{\n            width: '48px',\n            height: '48px',\n            border: '3px solid #f0f0f0',\n            borderTop: '3px solid #c19a6b',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite',\n            margin: '0 auto'\n          }}></div>\n          <style jsx>{`\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          `}</style>\n          <p style={{ marginTop: '16px', color: '#666', fontSize: '14px' }}>Loading appointments...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const filteredAppointments = statusFilter === 'all'\n    ? appointments\n    : appointments.filter(app => app.status === statusFilter);\n\n  return (\n    <>\n      <style jsx>{`\n        @media (max-width: 768px) {\n          .appointments-filter-bar {\n            flex-direction: column !important;\n            align-items: stretch !important;\n          }\n          .appointments-filter-bar button {\n            width: 100% !important;\n          }\n          .appointment-card-content {\n            flex-direction: column !important;\n            gap: 16px !important;\n          }\n          .appointment-card-right {\n            text-align: left !important;\n          }\n          .appointment-controls {\n            flex-direction: column !important;\n            gap: 12px !important;\n          }\n          .appointment-controls select,\n          .appointment-controls button {\n            width: 100% !important;\n          }\n        }\n      `}</style>\n      <DashboardLayout\n      title=\"Appointment Management\"\n      description=\"View and manage customer consultations, update appointment status, and track schedules.\"\n    >\n      {/* Filters */}\n      <div style={{\n        background: 'white',\n        borderRadius: '12px',\n        padding: '20px',\n        marginBottom: '24px',\n        boxShadow: '0 4px 12px rgba(193, 154, 107, 0.08)',\n        border: '1px solid #e8d5c4'\n      }}>\n        <div className=\"appointments-filter-bar\" style={{ display: 'flex', gap: '16px', alignItems: 'center', flexWrap: 'wrap' }}>\n          <label style={{\n            fontSize: '13px',\n            fontWeight: '600',\n            color: '#666'\n          }}>\n            Filter by Status:\n          </label>\n          <select\n            value={statusFilter}\n            onChange={(e) => setStatusFilter(e.target.value)}\n            style={{\n              padding: '8px 14px',\n              border: '1px solid #e8d5c4',\n              borderRadius: '8px',\n              fontSize: '14px',\n              outline: 'none',\n              cursor: 'pointer'\n            }}\n          >\n            <option value=\"all\">All Appointments</option>\n            <option value=\"pending\">Pending</option>\n            <option value=\"confirmed\">Confirmed</option>\n            <option value=\"completed\">Completed</option>\n            <option value=\"cancelled\">Cancelled</option>\n          </select>\n          <div style={{ flex: 1 }}></div>\n          <button\n            onClick={fetchAppointments}\n            style={{\n              padding: '8px 20px',\n              background: 'linear-gradient(135deg, #c19a6b, #a67c52)',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              fontSize: '14px',\n              fontWeight: '600',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            }}\n          >\n            <i className=\"fas fa-sync-alt\"></i>\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Appointments List */}\n      {loading ? (\n        <div style={{\n          background: 'white',\n          borderRadius: '12px',\n          padding: '64px',\n          textAlign: 'center',\n          boxShadow: '0 4px 12px rgba(193, 154, 107, 0.08)',\n          border: '1px solid #e8d5c4'\n        }}>\n          <div style={{\n            width: '48px',\n            height: '48px',\n            border: '3px solid #f0f0f0',\n            borderTop: '3px solid #c19a6b',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite',\n            margin: '0 auto'\n          }}></div>\n          <p style={{ marginTop: '16px', color: '#666', fontSize: '14px' }}>Loading appointments...</p>\n        </div>\n      ) : filteredAppointments.length === 0 ? (\n        <div style={{\n          background: 'white',\n          borderRadius: '12px',\n          padding: '64px 32px',\n          textAlign: 'center',\n          boxShadow: '0 4px 12px rgba(193, 154, 107, 0.08)',\n          border: '1px solid #e8d5c4'\n        }}>\n          <i className=\"fas fa-calendar-check\" style={{ fontSize: '64px', color: '#e8d5c4', marginBottom: '16px' }}></i>\n          <h3 style={{ fontSize: '20px', fontWeight: '600', color: '#333', marginBottom: '8px' }}>\n            No Appointments Found\n          </h3>\n          <p style={{ color: '#666', fontSize: '14px' }}>\n            {statusFilter === 'all' ? 'No appointments scheduled yet.' : `No ${statusFilter} appointments found.`}\n          </p>\n        </div>\n      ) : (\n        <div style={{\n          background: 'white',\n          borderRadius: '12px',\n          overflow: 'hidden',\n          boxShadow: '0 4px 12px rgba(193, 154, 107, 0.08)',\n          border: '1px solid #e8d5c4'\n        }}>\n          {filteredAppointments.map((appointment: any, index: number) => (\n            <div\n              key={appointment.id}\n              style={{\n                padding: '20px',\n                borderBottom: index < filteredAppointments.length - 1 ? '1px solid #f0f0f0' : 'none',\n                transition: 'background 0.2s ease'\n              }}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.background = 'rgba(193, 154, 107, 0.02)';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.background = 'transparent';\n              }}\n            >\n              <div className=\"appointment-card-content\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '12px' }}>\n                <div>\n                  <h3 style={{ fontSize: '16px', fontWeight: '600', color: '#333', marginBottom: '8px' }}>\n                    Consultation Request #{appointment.id?.slice(0, 8)}\n                  </h3>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                    <i className=\"fas fa-user\" style={{ fontSize: '12px', color: '#999' }}></i>\n                    <p style={{ fontSize: '13px', color: '#666' }}>\n                      {appointment.user_name || appointment.guest_name || 'N/A'}\n                    </p>\n                  </div>\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                    <i className=\"fas fa-envelope\" style={{ fontSize: '12px', color: '#999' }}></i>\n                    <p style={{ fontSize: '13px', color: '#666' }}>\n                      {appointment.user_email || appointment.guest_email || 'N/A'}\n                    </p>\n                  </div>\n                  {(appointment.user_phone || appointment.guest_phone) && (\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                      <i className=\"fas fa-phone\" style={{ fontSize: '12px', color: '#999' }}></i>\n                      <p style={{ fontSize: '13px', color: '#666' }}>\n                        {appointment.user_phone || appointment.guest_phone}\n                      </p>\n                    </div>\n                  )}\n                  <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                    <i className=\"fas fa-calendar\" style={{ fontSize: '12px', color: '#999' }}></i>\n                    <p style={{ fontSize: '13px', color: '#666' }}>\n                      Preferred: {formatDate(appointment.appointment_date)}\n                    </p>\n                  </div>\n                  {appointment.service_type && (\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                      <i className=\"fas fa-clock\" style={{ fontSize: '12px', color: '#999' }}></i>\n                      <p style={{ fontSize: '13px', color: '#666' }}>\n                        {appointment.service_type}\n                      </p>\n                    </div>\n                  )}\n                </div>\n                <div className=\"appointment-card-right\" style={{ textAlign: 'right' }}>\n                  <div style={{\n                    display: 'inline-block',\n                    padding: '6px 12px',\n                    background: appointment.status === 'completed' ? 'rgba(34, 197, 94, 0.1)' :\n                               appointment.status === 'confirmed' ? 'rgba(59, 130, 246, 0.1)' :\n                               appointment.status === 'pending' ? 'rgba(245, 158, 11, 0.1)' :\n                               appointment.status === 'cancelled' ? 'rgba(239, 68, 68, 0.1)' :\n                               'rgba(156, 163, 175, 0.1)',\n                    color: appointment.status === 'completed' ? '#16a34a' :\n                           appointment.status === 'confirmed' ? '#3b82f6' :\n                           appointment.status === 'pending' ? '#f59e0b' :\n                           appointment.status === 'cancelled' ? '#ef4444' :\n                           '#6b7280',\n                    borderRadius: '6px',\n                    fontSize: '12px',\n                    fontWeight: '600',\n                    textTransform: 'uppercase'\n                  }}>\n                    {appointment.status || 'Pending'}\n                  </div>\n                </div>\n              </div>\n\n              {appointment.notes && (\n                <div style={{\n                  padding: '12px',\n                  background: 'rgba(193, 154, 107, 0.03)',\n                  borderRadius: '8px',\n                  marginBottom: '12px',\n                  borderLeft: '3px solid #c19a6b'\n                }}>\n                  <p style={{ fontSize: '13px', color: '#666', lineHeight: '1.5' }}>\n                    <strong style={{ color: '#c19a6b' }}>Notes:</strong> {appointment.notes}\n                  </p>\n                </div>\n              )}\n\n              {/* Status update controls */}\n              <div className=\"appointment-controls\" style={{ display: 'flex', gap: '12px', alignItems: 'center', paddingTop: '12px', borderTop: '1px solid #f0f0f0' }}>\n                <select\n                  value={appointment.status}\n                  onChange={(e) => updateAppointmentStatus(appointment.id, e.target.value)}\n                  style={{\n                    padding: '8px 14px',\n                    border: '1px solid #e8d5c4',\n                    borderRadius: '8px',\n                    fontSize: '13px',\n                    outline: 'none',\n                    cursor: 'pointer',\n                    background: 'white'\n                  }}\n                >\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"confirmed\">Confirmed</option>\n                  <option value=\"completed\">Completed</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                </select>\n                <button\n                  onClick={() => router.push(`/dashboard/appointments/${appointment.id}`)}\n                  style={{\n                    padding: '8px 16px',\n                    border: '1px solid #e8d5c4',\n                    borderRadius: '8px',\n                    fontSize: '13px',\n                    fontWeight: '600',\n                    cursor: 'pointer',\n                    background: 'white',\n                    color: '#c19a6b',\n                    transition: 'all 0.2s ease'\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.background = '#c19a6b';\n                    e.currentTarget.style.color = 'white';\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.background = 'white';\n                    e.currentTarget.style.color = '#c19a6b';\n                  }}\n                >\n                  View Details\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </DashboardLayout>\n    </>\n  );\n};\n\nexport default DashboardAppointmentsPage;\n"],"names":["React","useState","useEffect","useAuth","useRouter","DashboardLayout","DashboardAppointmentsPage","router","user","appointments","setAppointments","loading","setLoading","statusFilter","setStatusFilter","push","role","fetchAppointments","response","fetch","data","json","success","Array","isArray","error","console","updateAppointmentStatus","appointmentId","newStatus","method","headers","body","JSON","stringify","status","ok","prev","map","app","id","formatDate","dateString","date","Date","toLocaleDateString","weekday","year","month","day","hour","minute","minHeight","display","alignItems","justifyContent","background","textAlign","width","height","border","borderTop","borderRadius","animation","margin","marginTop","color","fontSize","filteredAppointments","filter","padding","marginBottom","boxShadow","gap","flexWrap","fontWeight","e","target","value","outline","cursor","flex","length","overflow","appointment","index","borderBottom","transition","currentTarget","style","slice","user_name","guest_name","user_email","guest_email","user_phone","guest_phone","appointment_date","service_type","textTransform","notes","borderLeft","lineHeight","paddingTop"],"mappings":"4ZAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,ySAA2S,EACxU,wEACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qRAAuR,EACpT,oDACA","ignoreList":[0]}