module.exports=[41481,42603,a=>{"use strict";var b=a.i(56025),c=a.i(63933),d=a.i(36265),e=a.i(77532);a.i(13023),a.s(["useAppContext",0,()=>{let a=(0,b.useAuth)(),f=(0,d.useProduct)(),g=(0,c.useCart)(),h=(0,e.useUI)();return{user:a.user,token:a.token,loading:a.loading,error:a.error,setUser:a.setUser,setToken:a.setToken,setLoading:a.setLoading,setError:a.setError,logout:a.logout,signInWithGoogle:a.signInWithGoogle,products:f.products,orders:f.orders,appointments:f.appointments,fetchProducts:f.fetchProducts,fetchOrders:f.fetchOrders,fetchAppointments:f.fetchAppointments,createOrder:f.createOrder,createAppointment:f.createAppointment,updateProduct:f.updateProduct,deleteProduct:f.deleteProduct,createProduct:f.createProduct,cartItems:g.items,cartCount:g.cartCount,cartTotal:g.cartTotal,addItem:g.addItem,updateItem:g.updateItem,removeItem:g.removeItem,clearCart:g.clearCart,addToCartWithAuth:(b,c)=>a.user?(g.addItem({id:Date.now(),product_id:b.id,quantity:c,name:b.name,price:b.price,image_url:b.image_url}),{success:!0,requiresLogin:!1}):{success:!1,requiresLogin:!0,product:b,quantity:c},uiLoading:h.loading,uiError:h.error,setUILoading:h.setLoading,setUIError:h.setError}}],42603),a.s([],41481)},43271,a=>{"use strict";a.s(["calculateCartTotal",0,a=>a.reduce((a,b)=>a+("number"==typeof b.price?b.price:parseFloat(b.price||"0"))*b.quantity,0),"calculateShippingCost",0,a=>a>5e4?0:1500])},94894,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(41481);var e=a.i(42603),f=a.i(74886),g=a.i(19032),h=a.i(43271),i=a.i(20238),j=a.i(56283),k=a.i(75716);let l=k.default.div.withConfig({displayName:"CheckoutStyles__CheckoutContainer",componentId:"sc-7o1jzq-0"})(["display:flex;flex-direction:column;min-height:100vh;background:linear-gradient(135deg,#ffffff 0%,#f8f9fa 50%,#ffffff 100%);font-family:var(--font-montserrat),'Montserrat',sans-serif;"]),m=k.default.div.withConfig({displayName:"CheckoutStyles__CheckoutHeader",componentId:"sc-7o1jzq-1"})(["padding:10px 0 20px;text-align:center;background:linear-gradient(135deg,#ffffff 0%,#f8f9fa 100%);margin-top:0;h1{font-size:2.5rem;margin-bottom:10px;color:#222;font-weight:400;letter-spacing:2px;font-family:var(--font-playfair),'Playfair Display',serif;text-transform:uppercase;}h1::after{content:'';display:block;width:80px;height:2px;background:linear-gradient(to right,transparent,#c19a6b,transparent);margin:15px auto 0;opacity:0.7;}p{color:#666;font-size:0.95rem;margin-top:10px;}"]),n=k.default.div.withConfig({displayName:"CheckoutStyles__CheckoutContent",componentId:"sc-7o1jzq-2"})(["max-width:1400px;margin:0 auto;padding:0 100px 40px 40px;display:grid;grid-template-columns:1fr 380px;gap:40px;align-items:start;@media (max-width:992px){grid-template-columns:1fr;padding:0 20px 40px;}"]),o=k.default.div.withConfig({displayName:"CheckoutStyles__ShippingSection",componentId:"sc-7o1jzq-3"})(["background:white;padding:40px;box-shadow:0 5px 20px rgba(0,0,0,0.08);border:1px solid #f0f0f0;h2{font-size:1.8rem;margin-bottom:30px;color:#222;font-weight:400;font-family:var(--font-playfair),'Playfair Display',serif;text-transform:uppercase;letter-spacing:1px;padding-bottom:15px;border-bottom:2px solid #f0f0f0;}"]),p=k.default.div.withConfig({displayName:"CheckoutStyles__FormGrid",componentId:"sc-7o1jzq-4"})(["display:grid;grid-template-columns:repeat(2,1fr);gap:20px;@media (max-width:640px){grid-template-columns:1fr;}"]),q=k.default.div.withConfig({displayName:"CheckoutStyles__FormField",componentId:"sc-7o1jzq-5"})(["grid-column:",";@media (max-width:640px){grid-column:span 1;}label{display:block;font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;color:#333;margin-bottom:8px;font-family:var(--font-montserrat),'Montserrat',sans-serif;}input{width:100%;padding:12px 14px;border:2px solid #e0e0e0;font-size:15px;font-family:var(--font-montserrat),'Montserrat',sans-serif;transition:all 0.3s ease;background:#fafafa;&:focus{outline:none;border-color:#c19a6b;background:white;box-shadow:0 0 0 3px rgba(193,154,107,0.1);}&:read-only{background:#f5f5f5;cursor:not-allowed;}}"],a=>a.$fullWidth?"span 2":"span 1"),r=k.default.div.withConfig({displayName:"CheckoutStyles__OrderSummarySection",componentId:"sc-7o1jzq-6"})(["position:sticky;top:100px;@media (max-width:992px){position:static;}"]),s=k.default.div.withConfig({displayName:"CheckoutStyles__OrderSummaryCard",componentId:"sc-7o1jzq-7"})(["background:white;padding:25px;box-shadow:0 10px 30px -15px rgba(0,0,0,0.1);border:1px solid #f0f0f0;h2{font-size:1.5rem;margin-bottom:20px;color:#222;font-weight:400;font-family:var(--font-playfair),'Playfair Display',serif;padding-bottom:12px;border-bottom:2px solid #f0f0f0;}"]),t=k.default.div.withConfig({displayName:"CheckoutStyles__OrderItemsList",componentId:"sc-7o1jzq-8"})(["max-height:250px;overflow-y:auto;margin-bottom:15px;&::-webkit-scrollbar{width:6px;}&::-webkit-scrollbar-track{background:#f1f1f1;}&::-webkit-scrollbar-thumb{background:#c19a6b;border-radius:3px;}"]),u=k.default.div.withConfig({displayName:"CheckoutStyles__OrderItem",componentId:"sc-7o1jzq-9"})(["display:flex;gap:12px;padding:12px 0;border-bottom:1px solid #f0f0f0;&:last-child{border-bottom:none;}"]),v=k.default.div.withConfig({displayName:"CheckoutStyles__ItemImage",componentId:"sc-7o1jzq-10"})(["width:50px;height:50px;flex-shrink:0;background:#f5f5f5;display:flex;align-items:center;justify-content:center;overflow:hidden;img{width:100%;height:100%;object-fit:cover;}"]),w=k.default.div.withConfig({displayName:"CheckoutStyles__ItemDetails",componentId:"sc-7o1jzq-11"})(["flex:1;min-width:0;h3{font-size:13px;font-weight:600;color:#222;margin:0 0 6px 0;line-height:1.2;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}.price-qty{display:flex;justify-content:space-between;align-items:center;font-size:12px;.qty{color:#666;}.price{color:#c19a6b;font-weight:600;}}"]),x=k.default.div.withConfig({displayName:"CheckoutStyles__OrderSummaryDetails",componentId:"sc-7o1jzq-12"})(["padding:12px 0;border-top:2px solid #f0f0f0;border-bottom:2px solid #f0f0f0;margin:12px 0;.summary-row{display:flex;justify-content:space-between;padding:5px 0;font-size:14px;span:first-child{color:#666;}span:last-child{font-weight:500;color:#222;}&.total{font-size:17px;font-weight:600;padding-top:10px;border-top:2px solid #f0f0f0;margin-top:5px;span:first-child{color:#222;}span:last-child{color:#c19a6b;}}}"]),y=k.default.button.withConfig({displayName:"CheckoutStyles__PayButton",componentId:"sc-7o1jzq-13"})(["width:100%;padding:14px;background:#c19a6b;color:white;border:none;font-size:15px;font-weight:600;text-transform:uppercase;letter-spacing:1.5px;cursor:pointer;transition:all 0.4s cubic-bezier(0.175,0.885,0.32,1.275);font-family:var(--font-montserrat),'Montserrat',sans-serif;position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(120deg,transparent,rgba(255,255,255,0.3),transparent);transition:0.8s;}&:hover:not(:disabled){background:#a8825f;transform:translateY(-2px);box-shadow:0 8px 20px rgba(193,154,107,0.3);&::before{left:100%;}}&:disabled{background:#ccc;cursor:not-allowed;transform:none;}.spinner{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,0.3);border-top:2px solid white;border-radius:50%;animation:spin 0.8s linear infinite;margin-right:10px;}@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"]),z=k.default.div.withConfig({displayName:"CheckoutStyles__ErrorMessage",componentId:"sc-7o1jzq-14"})(["margin-top:20px;padding:15px;background:#fee;border:2px solid #fcc;color:#c33;font-size:14px;font-weight:500;text-align:center;"]),A=k.default.p.withConfig({displayName:"CheckoutStyles__SecurityNote",componentId:"sc-7o1jzq-15"})(["margin-top:12px;font-size:10px;color:#999;text-align:center;line-height:1.4;font-family:var(--font-montserrat),'Montserrat',sans-serif;i{margin-right:5px;color:#c19a6b;}"]),B=k.default.div.withConfig({displayName:"CheckoutStyles__LoadingScreen",componentId:"sc-7o1jzq-16"})(["min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#ffffff 0%,#f8f9fa 100%);.loading-content{text-align:center;.spinner{width:50px;height:50px;border:4px solid rgba(193,154,107,0.2);border-top:4px solid #c19a6b;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 20px;}p{color:#666;font-size:16px;font-family:var(--font-montserrat),'Montserrat',sans-serif;}}@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}"]);a.s(["default",0,()=>{let k=(0,d.useRouter)(),{user:C}=(0,e.useAppContext)(),D=(0,f.useCartStore)(a=>a.items);(0,f.useCartStore)(a=>a.getTotalPrice);let[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)({name:C?.name||"",email:C?.email||"",phone:"",address:"",city:"",state:"",zipCode:"",country:"India"}),K=(0,h.calculateCartTotal)(D),L=(0,h.calculateShippingCost)(K),M=K+L;(0,c.useEffect)(()=>{C||k.push("/auth?redirect=/checkout")},[C,k]),(0,c.useEffect)(()=>{C&&J(a=>({...a,name:C.name||a.name,email:C.email||a.email}))},[C]);let N=a=>{let{name:b,value:c}=a.target;J(a=>({...a,[b]:c}))},O=async b=>{b.preventDefault(),F(!0),H(null);try{if(0===D.length)throw Error("Cannot checkout with an empty cart");let b=await g.apiClient.createCheckoutSession({items:D.map(a=>({product_id:a.product_id,quantity:a.quantity,price:"number"==typeof a.price?a.price:parseFloat(a.price||"0"),name:a.name})),shipping_address:I});if(!b.success||!b.data)throw Error(b.error||"Failed to create checkout session");let c={key:"rzp_test_hZ6nPz5gldUPVo",amount:b.data.amount,currency:b.data.currency,name:"Colour My Space",description:"Furniture Purchase",order_id:b.data.razorpay_order_id,handler:async b=>{try{let c=await g.apiClient.verifyPayment({razorpay_order_id:b.razorpay_order_id,razorpay_payment_id:b.razorpay_payment_id,razorpay_signature:b.razorpay_signature});if(!c.success||!c.data)throw Error(c.error||"Payment verification failed");c.success&&c.data?(a.A(12974).then(a=>{a.useCartStore.getState().clearCart()}),k.push(`/checkout/success?orderId=${c.data.order_id}`)):H("Payment verification failed. Please contact support.")}catch(a){console.error("Payment verification error:",a),H("Payment verification failed. Please contact support.")}},prefill:{name:I.name,email:I.email,contact:I.phone},theme:{color:"#F59E0B"}},d=document.createElement("script");d.src="https://checkout.razorpay.com/v1/checkout.js",d.onload=()=>{new window.Razorpay(c).open()},d.onerror=()=>{H("Failed to load payment gateway. Please try again."),F(!1)},document.body.appendChild(d)}catch(a){console.error("Checkout error:",a),H(a.message||"An error occurred during checkout"),F(!1)}};return C?(0,b.jsxs)(l,{children:[(0,b.jsx)(i.default,{activePage:"checkout"}),(0,b.jsxs)(m,{children:[(0,b.jsx)("h1",{children:"Checkout"}),(0,b.jsx)("p",{children:"Complete your order securely"})]}),(0,b.jsxs)(n,{children:[(0,b.jsxs)(o,{children:[(0,b.jsx)("h2",{children:"Shipping Information"}),(0,b.jsxs)("form",{onSubmit:O,children:[(0,b.jsxs)(p,{children:[(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"name",children:"Full Name *"}),(0,b.jsx)("input",{type:"text",name:"name",id:"name",value:I.name,onChange:N,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,b.jsx)("input",{type:"email",name:"email",id:"email",value:I.email,onChange:N,required:!0,readOnly:!!C?.email})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"phone",children:"Phone Number *"}),(0,b.jsx)("input",{type:"tel",name:"phone",id:"phone",value:I.phone,onChange:N,required:!0})]}),(0,b.jsxs)(q,{$fullWidth:!0,children:[(0,b.jsx)("label",{htmlFor:"address",children:"Street Address *"}),(0,b.jsx)("input",{type:"text",name:"address",id:"address",value:I.address,onChange:N,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"city",children:"City *"}),(0,b.jsx)("input",{type:"text",name:"city",id:"city",value:I.city,onChange:N,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"state",children:"State / Province *"}),(0,b.jsx)("input",{type:"text",name:"state",id:"state",value:I.state,onChange:N,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"zipCode",children:"ZIP / Postal Code *"}),(0,b.jsx)("input",{type:"text",name:"zipCode",id:"zipCode",value:I.zipCode,onChange:N,required:!0})]}),(0,b.jsxs)(q,{children:[(0,b.jsx)("label",{htmlFor:"country",children:"Country"}),(0,b.jsx)("input",{type:"text",name:"country",id:"country",value:I.country,onChange:N,required:!0,readOnly:!0})]})]}),G&&(0,b.jsx)(z,{children:G})]})]}),(0,b.jsx)(r,{children:(0,b.jsxs)(s,{children:[(0,b.jsx)("h2",{children:"Order Summary"}),(0,b.jsx)(t,{children:D.map((a,c)=>{let d=a.product_id?`prod-${a.product_id}`:a.id?`item-${a.id}-${c}`:`idx-${c}`,e=a.image_url&&!a.image_url.includes("r2-placeholder.com");return(0,b.jsxs)(u,{children:[(0,b.jsxs)(v,{children:[e?(0,b.jsx)("img",{src:a.image_url,alt:a.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:a=>{a.currentTarget.style.display="none",a.currentTarget.nextSibling&&(a.currentTarget.nextSibling.style.display="flex")}}):null,(0,b.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#e8d5c4",display:e?"none":"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"#c19a6b"},children:(0,b.jsx)("i",{className:"fas fa-image"})})]}),(0,b.jsxs)(w,{children:[(0,b.jsx)("h3",{children:a.name}),(0,b.jsxs)("div",{className:"price-qty",children:[(0,b.jsxs)("span",{className:"qty",children:["Qty: ",a.quantity]}),(0,b.jsxs)("span",{className:"price",children:["₹",("number"==typeof a.price?a.price:parseFloat(a.price||"0")).toLocaleString()]})]})]})]},d)})}),(0,b.jsxs)(x,{children:[(0,b.jsxs)("div",{className:"summary-row",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["₹",K.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"summary-row",children:[(0,b.jsx)("span",{children:"Shipping"}),(0,b.jsx)("span",{children:0===L?"FREE":`₹${L.toLocaleString()}`})]}),(0,b.jsxs)("div",{className:"summary-row total",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["₹",M.toLocaleString()]})]})]}),(0,b.jsx)(y,{type:"submit",disabled:E||0===D.length,onClick:O,children:E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"spinner"}),"Processing..."]}):`Pay ₹${M.toLocaleString()}`}),(0,b.jsxs)(A,{children:[(0,b.jsx)("i",{className:"fas fa-lock"}),"Secure payment powered by Razorpay. Your information is encrypted and safe."]})]})})]}),(0,b.jsx)(j.default,{})]}):(0,b.jsx)(B,{children:(0,b.jsxs)("div",{className:"loading-content",children:[(0,b.jsx)("div",{className:"spinner"}),(0,b.jsx)("p",{children:"Redirecting to login..."})]})})}],94894)},12974,a=>{a.v(a=>Promise.resolve().then(()=>a(74886)))}];

//# sourceMappingURL=src_9b107519._.js.map