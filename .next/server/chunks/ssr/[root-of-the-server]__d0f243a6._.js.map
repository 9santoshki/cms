{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/src/context/AppContext.tsx","turbopack:///[project]/src/context/CombinedAppContext.ts","turbopack:///[project]/src/components/AuthForm.tsx","turbopack:///[project]/src/app/auth/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","// Modular Context System\n// This file now serves as an index for the modular context system.\n// The original monolithic AppContext has been split into smaller, focused contexts:\n// \n// - AuthContext: Handles authentication state (user, token, login, logout)\n// - CartContext: Manages shopping cart functionality\n// - ProductContext: Handles products, orders, and appointments\n// - UIContext: Manages UI state (loading, errors)\n//\n// To use these contexts in your components, import the specific context you need:\n//\n// import { useAuth } from '@/context/AuthContext';\n// import { useCart } from '@/context/CartContext';\n// import { useProduct } from '@/context/ProductContext';\n// import { useUI } from '@/context/UIContext';\n\nexport { useAuth } from './AuthContext';\nexport { useCart } from './CartContext';\nexport { useProduct } from './ProductContext';\nexport { useUI } from './UIContext';\nexport { AppProvider } from './AppProvider';\nexport { useAppContext } from './CombinedAppContext';","import { useAuth } from './AuthContext';\nimport { useProduct } from './ProductContext';\nimport { useCart } from './CartContext';\nimport { useUI } from './UIContext';\n\n// Define the types based on UIContext interface\ninterface LoadingState {\n  products: boolean;\n  cart: boolean;\n  orders: boolean;\n  appointments: boolean;\n  auth: boolean;\n  user: boolean;\n}\ninterface ErrorState {\n  products: string | null;\n  cart: string | null;\n  orders: string | null;\n  appointments: string | null;\n  auth: string | null;\n  user: string | null;\n}\n\n// Define the combined context interface\ninterface CombinedAppContext {\n  // Auth context\n  user: any;\n  token: string | null;\n  loading: any;\n  error: string | null;\n  setUser: (user: any) => void;\n  setToken: (token: string | null) => void;\n  setLoading: (loading: any) => void;\n  setError: (error: string | null) => void;\n  logout: () => void;\n  signInWithGoogle: () => Promise<void>;\n\n  // Product context\n  products: any[];\n  orders: any[];\n  appointments: any[];\n  fetchProducts: () => Promise<void>;\n  fetchOrders: () => Promise<void>;\n  fetchAppointments: () => Promise<void>;\n  createOrder: (orderData: any) => Promise<any>;\n  createAppointment: (appointmentData: any) => Promise<any>;\n  updateProduct: (id: number, data: any) => Promise<any>;\n  deleteProduct: (id: number) => Promise<any>;\n  createProduct: (productData: any) => Promise<any>;\n\n  // Cart context\n  cartItems: any[];\n  cartCount: number;\n  cartTotal: number;\n  addItem: (item: any) => void;\n  updateItem: (productId: number, quantity: number) => void;\n  removeItem: (productId: number) => void;\n  clearCart: () => void;\n  addToCartWithAuth: (product: any, quantity: number) => any;\n\n  // UI context (adapting to match the actual UIContext interface)\n  uiLoading: LoadingState;\n  uiError: ErrorState;\n  setUILoading: (type: keyof LoadingState, value: boolean) => void;\n  setUIError: (type: keyof ErrorState, value: string | null) => void;\n}\nexport const useAppContext = (): CombinedAppContext => {\n  const auth = useAuth();\n  const product = useProduct();\n  const cart = useCart();\n  const ui = useUI();\n\n  // Create a function to add to cart with authentication check\n  const addToCartWithAuth = (product: any, quantity: number) => {\n    if (!auth.user) {\n      // Not authenticated\n      return {\n        success: false,\n        requiresLogin: true,\n        product,\n        quantity\n      };\n    }\n\n    // User is authenticated, add to cart\n    cart.addItem({\n      id: Date.now(),\n      // temporary ID for cart item\n      product_id: product.id,\n      quantity: quantity,\n      name: product.name,\n      price: product.price,\n      image_url: product.image_url\n    });\n    return {\n      success: true,\n      requiresLogin: false\n    };\n  };\n  return {\n    // Auth context\n    user: auth.user,\n    token: auth.token,\n    loading: auth.loading,\n    error: auth.error,\n    setUser: auth.setUser,\n    setToken: auth.setToken,\n    setLoading: auth.setLoading,\n    setError: auth.setError,\n    logout: auth.logout,\n    signInWithGoogle: auth.signInWithGoogle,\n    // Product context\n    products: product.products,\n    orders: product.orders,\n    appointments: product.appointments,\n    fetchProducts: product.fetchProducts,\n    fetchOrders: product.fetchOrders,\n    fetchAppointments: product.fetchAppointments,\n    createOrder: product.createOrder,\n    createAppointment: product.createAppointment,\n    updateProduct: product.updateProduct,\n    deleteProduct: product.deleteProduct,\n    createProduct: product.createProduct,\n    // Cart context\n    cartItems: cart.items,\n    cartCount: cart.cartCount,\n    cartTotal: cart.cartTotal,\n    addItem: cart.addItem,\n    updateItem: cart.updateItem,\n    removeItem: cart.removeItem,\n    clearCart: cart.clearCart,\n    addToCartWithAuth,\n    // UI context (adapting to match the actual UIContext interface)\n    uiLoading: ui.loading,\n    uiError: ui.error,\n    setUILoading: ui.setLoading,\n    setUIError: ui.setError\n  };\n};","'use client';\n\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useState } from 'react';\nconst AuthForm = () => {\n  const {\n    signInWithGoogle\n  } = useAuth();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const [loading, setLoading] = useState(false);\n  const handleGoogleSignIn = async () => {\n    setLoading(true);\n    try {\n      await signInWithGoogle();\n\n      // Load user's cart from server after successful login\n      const {\n        useCartStore\n      } = await import('@/store/cartStore');\n      await useCartStore.getState().loadServerCart();\n      const redirect = searchParams.get('redirect') || '/';\n      router.push(redirect);\n    } catch (error) {\n      console.error('Sign in error:', error);\n      setLoading(false);\n    }\n  };\n  return <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100\">\n      <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-md overflow-hidden\" style={{\n      border: '1px solid #c19a6b'\n    }}>\n        {/* Header */}\n        <div className=\"p-8 border-b\" style={{\n        background: 'linear-gradient(135deg, #f8f4f0 0%, #efe9e3 100%)'\n      }}>\n          <h1 className=\"text-3xl font-semibold text-center mb-2\" style={{\n          color: '#333333',\n          fontFamily: 'Playfair Display, serif'\n        }}>\n            Welcome Back\n          </h1>\n          <p className=\"text-sm text-gray-600 text-center\" style={{\n          fontFamily: 'Montserrat, sans-serif'\n        }}>\n            Sign in to continue to Colour My Space\n          </p>\n        </div>\n\n        {/* Body */}\n        <div className=\"p-8\" style={{\n        backgroundColor: '#fffaf5'\n      }}>\n          {/* Google Sign In Button */}\n          <button onClick={handleGoogleSignIn} disabled={loading} className=\"w-full flex items-center justify-center gap-3 py-3 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed\" style={{\n          fontFamily: 'Montserrat, sans-serif',\n          backgroundColor: 'white'\n        }}>\n            {loading ? <div className=\"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin\"></div> : <>\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\n                  <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\n                  <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\n                  <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\n                </svg>\n                <span className=\"text-gray-700 font-medium\">Continue with Google</span>\n              </>}\n          </button>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-xs text-gray-500\" style={{\n            fontFamily: 'Montserrat, sans-serif'\n          }}>\n              By signing in, you agree to our Terms of Service and Privacy Policy\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>;\n};\nexport default AuthForm;","'use client';\n\nimport { useAppContext } from '@/context/AppContext';\nimport { useEffect, useState, Suspense } from 'react';\nimport { useRouter } from 'next/navigation';\nimport AuthForm from '@/components/AuthForm';\nfunction AuthContent() {\n  const {\n    user,\n    loading\n  } = useAppContext();\n  const router = useRouter();\n  const [redirect, setRedirect] = useState<string>('/');\n  useEffect(() => {\n    // Read search params from window on client side to avoid useSearchParams SSR warning\n    if (typeof window !== 'undefined') {\n      const params = new URLSearchParams(window.location.search);\n      setRedirect(params.get('redirect') || '/');\n    }\n  }, []);\n  useEffect(() => {\n    if (!loading.user && user) {\n      // If user is already logged in, redirect to the target page or home\n      const targetPath = redirect && redirect !== '/' ? decodeURIComponent(redirect) : '/';\n      router.push(targetPath);\n    }\n  }, [user, loading.user, redirect, router]);\n\n  // Show loading or redirecting message while checking user status\n  if (!loading.user && user) {\n    return <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Redirecting...</p>\n        </div>\n      </div>;\n  }\n  return <AuthForm />;\n}\nexport default function Auth() {\n  return <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>}>\n      <AuthContent />\n    </Suspense>;\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}