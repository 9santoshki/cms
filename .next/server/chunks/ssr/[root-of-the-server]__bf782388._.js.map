{"version":3,"sources":["turbopack:///[project]/src/app/products/[slug]/ProductDetailPageClient.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/products/[slug]/ProductDetailPageClient.tsx","turbopack:///[project]/src/app/products/[slug]/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/products/[slug]/ProductDetailPageClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/products/[slug]/ProductDetailPageClient.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useProduct } from '@/context/ProductContext';\nimport { apiClient } from '@/lib/api';\nimport Header from '@/components/Header';\nimport Footer from '@/components/Footer';\nimport ProductDetailDisplay from '@/components/ProductDetailDisplay';\n\ninterface ProductDetailPageClientProps {\n  params: {\n    slug: string;\n  };\n}\n\nconst ProductDetailPageClient = (props: ProductDetailPageClientProps) => {\n  const { slug } = props.params || {};\n  const {\n    products,\n    loading: contextLoading,\n    error: contextError,\n    fetchProducts\n  } = useProduct();\n  const [product, setProduct] = useState<any>(null);\n  const [loadingProduct, setLoadingProduct] = useState(true);\n  const [productError, setProductError] = useState<string | null>(null);\n\n  // Helper function to map category to image class\n  const mapCategoryToClass = (category: string | undefined) => {\n    if (!category) return 'modern';\n\n    const lowerCategory = category.toLowerCase();\n    if (lowerCategory.includes('modern') || lowerCategory.includes('sofa') || lowerCategory.includes('coffee')) {\n      return 'modern';\n    } else if (lowerCategory.includes('classic') || lowerCategory.includes('dining')) {\n      return 'classic';\n    } else if (lowerCategory.includes('coastal') || lowerCategory.includes('bed')) {\n      return 'coastal';\n    } else if (lowerCategory.includes('office') || lowerCategory.includes('desk')) {\n      return 'office';\n    } else if (lowerCategory.includes('hotel') || lowerCategory.includes('lobby')) {\n      return 'hotel';\n    } else if (lowerCategory.includes('restaurant')) {\n      return 'restaurant';\n    } else {\n      return 'modern'; // default\n    }\n  };\n\n  // Fetch product on mount and when slug changes\n  useEffect(() => {\n    if (!slug) return;\n\n    const fetchProduct = async () => {\n      setLoadingProduct(true);\n      setProductError(null);\n\n      try {\n        // Check if the parameter is a numeric ID or a slug\n        const isNumericId = /^\\d+$/.test(slug);\n        let result;\n\n        if (isNumericId) {\n          // Parameter is a numeric ID\n          result = await apiClient.getProduct(parseInt(slug, 10));\n        } else {\n          // Parameter is a slug - need to make different API call\n          result = await apiClient.getProductBySlug(slug);\n        }\n\n        if (result.success && result.data) {\n          // Convert price string to number if necessary and add imageClass based on category\n          const formattedProduct = {\n            ...result.data,\n            price: typeof result.data.price === 'string'\n              ? parseFloat(result.data.price)\n              : result.data.price,\n            imageClass: mapCategoryToClass(result.data.category) || 'modern',\n            image_url: result.data.image_url\n          };\n          setProduct(formattedProduct);\n        } else {\n          const error = result.error || 'Product not found';\n          setProductError(error);\n        }\n      } catch (err: any) {\n        const errorMsg = err.message || 'Failed to load product';\n        setProductError(errorMsg);\n      } finally {\n        setLoadingProduct(false);\n      }\n    };\n\n    // Fetch product from API\n    fetchProduct();\n  }, [slug]);\n\n  // If products haven't been loaded at all, fetch them\n  useEffect(() => {\n    if (products.length === 0 && !contextLoading) {\n      fetchProducts();\n    }\n  }, [products.length, fetchProducts, contextLoading]);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white product-detail-page\">\n      <Header activePage=\"products\" />\n      {productError ? (\n        <div className=\"flex items-center justify-center min-h-[70vh]\">\n          <div className=\"text-center p-8 bg-white rounded-xl shadow-lg max-w-md border border-gray-100\">\n            <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4\">\n              <svg className=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-bold text-gray-900\">Item Not Available</h2>\n            <p className=\"mt-2 text-gray-600\">{productError}</p>\n            <button\n              className=\"mt-6 px-6 py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 shadow-lg\"\n              onClick={() => {\n                window.location.href = '/products';\n              }}\n            >\n              Browse Collection\n            </button>\n          </div>\n        </div>\n      ) : product ? (\n        <div className=\"container mx-auto px-4 py-8\">\n          <ProductDetailDisplay product={product} />\n        </div>\n      ) : (\n        <div className=\"flex items-center justify-center min-h-[70vh]\">\n          <div className=\"text-center p-8 bg-white rounded-xl shadow-lg max-w-md border border-gray-100\">\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading product details...</p>\n          </div>\n        </div>\n      )}\n      <Footer />\n    </div>\n  );\n};\n\nexport default ProductDetailPageClient;","import React from 'react';\nimport ProductDetailPageClient from './ProductDetailPageClient';\n\ninterface ProductDetailPageProps {\n  params: Promise<{\n    slug: string;\n  }>;\n}\n\nconst ProductDetailPage = async ({ params }: ProductDetailPageProps) => {\n  const resolvedParams = await params;\n  return <ProductDetailPageClient params={resolvedParams} />;\n};\n\nexport default ProductDetailPage;"],"names":["React","useState","useEffect","useProduct","apiClient","Header","Footer","ProductDetailDisplay","ProductDetailPageClientProps","params","slug","ProductDetailPageClient","props","products","loading","contextLoading","error","contextError","fetchProducts","product","setProduct","loadingProduct","setLoadingProduct","productError","setProductError","mapCategoryToClass","category","lowerCategory","toLowerCase","includes","fetchProduct","isNumericId","test","result","getProduct","parseInt","getProductBySlug","success","data","formattedProduct","price","parseFloat","imageClass","image_url","err","errorMsg","message","length","window","location","href","ProductDetailPageProps","Promise","ProductDetailPage","resolvedParams"],"mappings":"iYAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qTAAuT,EACpV,oFACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,iSAAmS,EAChU,gEACA,kIEJJ,EAAoC,CAA7BW,CAAwD,CAAA,CAAA,MAQ/D,IAAM0C,EAAoB,GARqC,GAQrCA,AAAO,EARH,MAAM,AAQD5C,CAAZ,AAAYA,CAAgC,IACjE,CADsE,GAChE6C,EAAiB,MAAM7C,EAC7B,IADoB,AAAe,EAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAuB,CAAA,CAAC,MAAM,CAAC,AAAC6C,GAC1C,CAAC,UADuD,CAAC,GAAG,IAG7CD,iBAAiB","ignoreList":[0]}