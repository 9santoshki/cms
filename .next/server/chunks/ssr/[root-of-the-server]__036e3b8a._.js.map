{"version":3,"sources":["turbopack:///[project]/src/components/OrderHistory.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/components/OrderHistory.tsx","turbopack:///[project]/src/app/orders/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/OrderHistory.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/OrderHistory.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React, { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAppContext } from '../context/AppContext';\nimport '../App.css'; // Import the main CSS file\nimport { formatDate } from '../utils/formatUtils';\n\nconst OrderHistory = () => {\n  const router = useRouter();\n\nconst navigate = (path: string) => {\n  router.push(path);\n};\n  const { user, cartItems, orders, loading, error, fetchOrders } = useAppContext();\n  \n  const cartCount = cartItems.reduce((total, item) => total + item.quantity, 0);\n\n  useEffect(() => {\n    fetchOrders();\n  }, [fetchOrders]);\n\n  const formatDateLocal = (dateString?: string) => {\n    if (!dateString) return '';\n    return formatDate(dateString);\n  };\n\n  if (loading.orders) {\n    return (\n      <div className=\"order-history-page\">\n        {/* Navigation Bar */}\n        <nav className=\"navbar\">\n          <div className=\"nav-container\">\n            <div className=\"nav-logo\">\n              <h2>Colour My Space</h2>\n            </div>\n            <div className=\"nav-menu\">\n              <a href=\"/\" className=\"nav-link\">Home</a>\n              <a href=\"/shop\" className=\"nav-link\">Shop</a>\n              <a href=\"#portfolio\" className=\"nav-link\">Portfolio</a>\n              <a href=\"#services\" className=\"nav-link\">Services</a>\n              {user && (\n                <a href=\"/orders\" className=\"nav-link\">Orders</a>\n              )}\n              <a href=\"#about\" className=\"nav-link\">About</a>\n              <a href=\"#contact\" className=\"nav-link\">Contact</a>\n            </div>\n            <div className=\"nav-icons\">\n              <button className=\"nav-icon\">\n                <i className=\"fas fa-search\"></i>\n              </button>\n              {user ? (\n                <>\n                  <button className=\"nav-icon\" onClick={() => {\n                    const currentPath = typeof window !== 'undefined' ? window.location.pathname : '/';\n                    navigate(`/auth?redirect=${encodeURIComponent(currentPath)}`);\n                  }}>\n                    <i className=\"fas fa-sign-out-alt\"></i>\n                </button>\n                  <span className=\"user-greeting\">Hi, {user.name}</span>\n                </>\n              ) : (\n                <button className=\"nav-icon\" onClick={() => {\n                  const currentPath = typeof window !== 'undefined' ? window.location.pathname : '/';\n                  navigate(`/auth?redirect=${encodeURIComponent(currentPath)}`);\n                }}>\n                  <i className=\"fas fa-user\"></i>\n                </button>\n              )}\n              <button className=\"nav-icon\" onClick={() => navigate('/cart')}>\n                <i className=\"fas fa-shopping-cart\"></i>\n                {cartItems.length > 0 && <span className=\"cart-count\">{cartCount}</span>}\n              </button>\n            </div>\n            {/* Mobile menu toggle */}\n            <div className=\"nav-toggle\">\n              <span className=\"bar\"></span>\n              <span className=\"bar\"></span>\n              <span className=\"bar\"></span>\n            </div>\n          </div>\n        </nav>\n        <div className=\"order-history-container\">\n          <div className=\"order-history-header\">\n            <h2>Order History</h2>\n            <p>Loading your orders...</p>\n          </div>\n          \n          <div className=\"order-history-content\">\n            <div className=\"loading-container\">\n              <div className=\"loading-spinner\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"order-history-page\">\n      {/* Navigation Bar */}\n      <nav className=\"navbar\">\n        <div className=\"nav-container\">\n          <div className=\"nav-logo\">\n            <h2>Colour My Space</h2>\n          </div>\n          <div className=\"nav-menu\">\n            <a href=\"/\" className=\"nav-link\">Home</a>\n            <a href=\"/shop\" className=\"nav-link\">Shop</a>\n            <a href=\"#portfolio\" className=\"nav-link\">Portfolio</a>\n            <a href=\"#services\" className=\"nav-link\">Services</a>\n            {user && (\n              <a href=\"/orders\" className=\"nav-link\">Orders</a>\n            )}\n            <a href=\"#\" className=\"nav-link\" onClick={(e) => { e.preventDefault(); navigate('/about'); }}>About</a>\n              <a href=\"#\" className=\"nav-link\" onClick={(e) => { e.preventDefault(); navigate('/contact'); }}>Contact</a>\n            </div>\n            <div className=\"nav-menu\">\n              <a href=\"#\" className=\"nav-link\" onClick={(e) => { e.preventDefault(); navigate('/about'); }}>About</a>\n              <a href=\"#\" className=\"nav-link\" onClick={(e) => { e.preventDefault(); navigate('/contact'); }}>Contact</a>\n          </div>\n          <div className=\"nav-icons\">\n            <button className=\"nav-icon\">\n              <i className=\"fas fa-search\"></i>\n            </button>\n            {user ? (\n              <>\n                <button className=\"nav-icon\" onClick={() => navigate('/auth')}>\n                  <i className=\"fas fa-sign-out-alt\"></i>\n                </button>\n                <span className=\"user-greeting\">Hi, {user.name}</span>\n              </>\n            ) : (\n              <button className=\"nav-icon\" onClick={() => {\n                const currentPath = typeof window !== 'undefined' ? window.location.pathname : '/';\n                navigate(`/auth?redirect=${encodeURIComponent(currentPath)}`);\n              }}>\n                <i className=\"fas fa-user\"></i>\n              </button>\n            )}\n            {user && (\n            <button className=\"nav-icon\" onClick={() => navigate('/cart')}>\n              <i className=\"fas fa-shopping-cart\"></i>\n              {cartItems.length > 0 && <span className=\"cart-count\">{cartCount}</span>}\n            </button>\n            )}\n          </div>\n          {/* Mobile menu toggle */}\n          <div className=\"nav-toggle\">\n            <span className=\"bar\"></span>\n            <span className=\"bar\"></span>\n            <span className=\"bar\"></span>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"order-history-container\">\n        <div className=\"order-history-header\">\n          <h2>Order History</h2>\n          <p>Your past purchases</p>\n        </div>\n        \n        {error.orders && <div className=\"error-message\">{error.orders}</div>}\n        \n        <div className=\"order-history-content\">\n          {orders.length === 0 ? (\n            <div className=\"empty-orders\">\n              <i className=\"fas fa-shopping-bag\"></i>\n              <h3>No orders yet</h3>\n              <p>You haven't placed any orders yet.</p>\n              <button className=\"btn primary\" onClick={() => navigate('/shop')}>\n                Start Shopping\n              </button>\n            </div>\n          ) : (\n            <div className=\"orders-list\">\n              {[...orders].reverse().map((order, index) => (\n                <div className=\"order-card\" key={order.id || index}>\n                  <div className=\"order-header\">\n                    <div className=\"order-id\">\n                      <span>Order #{order.id || index + 1}</span>\n                      <span className=\"order-date\">{formatDateLocal(order.created_at || order.date)}</span>\n                    </div>\n                    <div className=\"order-total\">\n                      ₹{((order.total_amount ?? order.total ?? 0) as number).toLocaleString()}\n                    </div>\n                  </div>\n                  \n                  <div className=\"order-items\">\n                    {order.items && order.items.map((item: any, itemIndex: number) => (\n                      <div className=\"order-item\" key={item.id || itemIndex}>\n                        <div className=\"item-name\">{item.name || item.product_name}</div>\n                        <div className=\"item-quantity\">Qty: {item.quantity}</div>\n                        <div className=\"item-price\">₹{((typeof item.price === 'number' ? item.price : parseFloat(item.price || '0')) * item.quantity).toLocaleString()}</div>\n                      </div>\n                    ))}\n                  </div>\n                  \n                  {order.customer && (\n                    <div className=\"order-customer\">\n                      <div className=\"customer-info\">\n                        <strong>Customer:</strong> {order.customer.name}\n                      </div>\n                      <div className=\"customer-info\">\n                        <strong>Email:</strong> {order.customer.email}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderHistory;","import OrderHistory from '@/components/OrderHistory'\n\nexport default function Orders() {\n  return <OrderHistory />\n}"],"names":["React","useEffect","useRouter","useAppContext","formatDate","OrderHistory","router","navigate","path","push","user","cartItems","orders","loading","error","fetchOrders","cartCount","reduce","total","item","quantity","formatDateLocal","dateString","currentPath","window","location","pathname","encodeURIComponent","name","length","e","preventDefault","reverse","map","order","index","id","created_at","date","total_amount","toLocaleString","items","itemIndex","product_name","price","parseFloat","customer","email","Orders"],"mappings":"2UAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,iSAAmS,EAChU,gEACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,6QAA+Q,EAC5S,4CACA,mIELJ,EAAyB,CAAlBK,CAA6C,CAAA,CAAA,GAAA,IAErC,EAFI,MAAM,CAED2C,IACtB,EAD4BA,CAAA,EAAG,CACxB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAY,CAAA,CAAG,EACzB","ignoreList":[0]}