{"version":3,"sources":["turbopack:///[project]/src/app/admin/login/page.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/admin/login/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/login/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/login/page.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport { useAppContext } from '@/context/AppContext';\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport AuthForm from '@/components/AuthForm';\n\nexport default function AdminLogin() {\n  const { user, loading } = useAppContext();\n  const router = useRouter();\n  const [redirect, setRedirect] = useState<string>('/admin');\n  const [hasMounted, setHasMounted] = useState(false);\n\n  useEffect(() => {\n    setHasMounted(true);\n    // Get redirect URL from the browser URL after component mounts\n    if (typeof window !== 'undefined') {\n      const urlParams = new URLSearchParams(window.location.search);\n      const redirectParam = urlParams.get('redirect');\n      setRedirect(redirectParam || '/admin');\n    }\n  }, []);\n\n  useEffect(() => {\n    // If user is already logged in as admin/moderator, redirect to admin page\n    if (!loading.user && user && (user.role === 'admin' || user.role === 'moderator')) {\n      router.push(redirect);\n    }\n    // If user is logged in but not admin/moderator, redirect to home\n    else if (!loading.user && user && user.role !== 'admin' && user.role !== 'moderator') {\n      router.push('/');\n    }\n  }, [user, loading.user, redirect, router]);\n\n  // Show a loading state during hydration to prevent mismatches\n  if (!hasMounted) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"w-full max-w-md space-y-8\">\n          <div className=\"text-center\">\n            <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n              Admin Access\n            </h2>\n            <p className=\"mt-2 text-center text-sm text-gray-600\">\n              Sign in to access admin features\n            </p>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Show loading while checking user status\n  if (loading.user || (user && (user.role === 'admin' || user.role === 'moderator'))) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show auth form for login/registration\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"w-full max-w-md space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Admin Access\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Sign in to access admin features\n          </p>\n        </div>\n        <AuthForm />\n      </div>\n    </div>\n  );\n}"],"names":["useAppContext","useEffect","useState","useRouter","AuthForm","AdminLogin","user","loading","router","redirect","setRedirect","hasMounted","setHasMounted","window","urlParams","URLSearchParams","location","search","redirectParam","get","role","push"],"mappings":"2UAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,8RAAgS,EAC7T,6DACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,0QAA4Q,EACzS,yCACA","ignoreList":[0]}