{"version":3,"sources":["turbopack:///[project]/src/app/booking/page.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/booking/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/booking/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/booking/page.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React, { useState } from 'react';\nimport { format, addDays, isAfter, isSameDay } from 'date-fns';\nimport { useAppContext } from '@/context/AppContext';\n\nconst BookConsultationPage = () => {\n  const { user, loading } = useAppContext();\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n  const [selectedTime, setSelectedTime] = useState<string | null>(null);\n  const [notes, setNotes] = useState('');\n  const [availableSlots, setAvailableSlots] = useState<string[]>([]);\n  const [bookingStatus, setBookingStatus] = useState<'idle' | 'submitting' | 'success' | 'error'>('idle');\n\n  // Generate available dates (next 30 days, excluding Sundays)\n  const generateAvailableDates = () => {\n    const dates = [];\n    let currentDate = new Date();\n    \n    // Ensure we start from today or tomorrow\n    if (currentDate.getHours() >= 18) { // If after 6 PM, start from next day\n      currentDate = addDays(currentDate, 1);\n    }\n    \n    for (let i = 0; i < 30; i++) {\n      const dateToAdd = addDays(currentDate, i);\n      // Skip Sundays (0 = Sunday, 1 = Monday, etc.)\n      if (dateToAdd.getDay() !== 0) {\n        dates.push(dateToAdd);\n      }\n    }\n    return dates;\n  };\n\n  // Generate available time slots for a given date\n  const generateTimeSlots = (date: Date) => {\n    // If it's today, start from the next available hour (after 9 AM)\n    const today = new Date();\n    const isToday = isSameDay(date, today);\n    \n    const startHour = isToday && today.getHours() >= 9 ? today.getHours() + 1 : 9;\n    const slots = [];\n    \n    for (let hour = startHour; hour < 18; hour++) { // 9 AM to 6 PM\n      // Skip 1 PM (lunch break)\n      if (hour === 13) continue;\n      \n      // Format the time as \"11:00 AM\" or \"2:00 PM\"\n      const timeString = new Date().setHours(hour, 0, 0, 0);\n      slots.push(format(timeString, 'h:mm a'));\n    }\n    \n    return slots;\n  };\n\n  const handleDateSelect = (date: Date) => {\n    setSelectedDate(date);\n    setSelectedTime(null);\n    setAvailableSlots(generateTimeSlots(date));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!user) {\n      setBookingStatus('error');\n      alert('You must be logged in to book a consultation.');\n      return;\n    }\n    \n    if (!selectedDate || !selectedTime) {\n      setBookingStatus('error');\n      alert('Please select a date and time for your consultation.');\n      return;\n    }\n\n    setBookingStatus('submitting');\n    \n    try {\n      // In a real implementation, this would call your API to book the appointment\n      // For now, we'll simulate the booking\n      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API call\n      \n      setBookingStatus('success');\n      \n      // Reset form after successful booking\n      setTimeout(() => {\n        setSelectedDate(null);\n        setSelectedTime(null);\n        setNotes('');\n        setAvailableSlots([]);\n      }, 3000);\n    } catch (error) {\n      console.error('Booking error:', error);\n      setBookingStatus('error');\n    }\n  };\n\n  const availableDates = generateAvailableDates();\n\n  if (!user && loading.user) {\n    return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center p-4\">\n        <div className=\"bg-white p-8 rounded-xl shadow-lg max-w-md w-full text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Login Required</h2>\n          <p className=\"text-gray-600 mb-6\">\n            Please sign in to book a design consultation.\n          </p>\n          <button \n            className=\"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors\"\n            onClick={() => window.dispatchEvent(new CustomEvent('showLoginModal'))}\n          >\n            Sign In\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12\">\n      <div className=\"container mx-auto px-4 max-w-4xl\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Book a Design Consultation</h1>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n            Schedule a personalized consultation with our interior design experts to transform your space.\n          </p>\n        </div>\n\n        <div className=\"bg-white rounded-xl shadow-lg p-8\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Calendar Section */}\n            <div>\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">Select Date</h2>\n              \n              <div className=\"grid grid-cols-7 gap-2 mb-6\">\n                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\n                  <div key={day} className=\"text-center text-sm font-medium text-gray-500 py-2\">\n                    {day}\n                  </div>\n                ))}\n                \n                {availableDates.map(date => (\n                  <button\n                    key={date.toString()}\n                    className={`p-2 text-center rounded-lg border ${\n                      selectedDate && isSameDay(date, selectedDate)\n                        ? 'bg-amber-500 text-white border-amber-500'\n                        : 'border-gray-200 hover:bg-gray-50'\n                    }`}\n                    onClick={() => handleDateSelect(date)}\n                  >\n                    <div className=\"text-sm font-medium\">{format(date, 'd')}</div>\n                    <div className=\"text-xs\">{format(date, 'MMM')}</div>\n                  </button>\n                ))}\n              </div>\n\n              {/* Time Slots Section */}\n              {selectedDate && (\n                <div className=\"mt-8\">\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">\n                    Available Times for {format(selectedDate, 'MMMM d, yyyy')}\n                  </h3>\n                  \n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {availableSlots.map(slot => (\n                      <button\n                        key={slot}\n                        className={`py-2 px-3 rounded-lg border text-sm ${\n                          selectedTime === slot\n                            ? 'bg-amber-500 text-white border-amber-500'\n                            : 'border-gray-200 hover:bg-gray-50'\n                        }`}\n                        onClick={() => setSelectedTime(slot)}\n                      >\n                        {slot}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Booking Form */}\n            <div>\n              <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">Your Information</h2>\n              \n              <form onSubmit={handleSubmit}>\n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">Full Name</label>\n                  <input\n                    type=\"text\"\n                    value={user.name || ''}\n                    disabled\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100\"\n                  />\n                </div>\n                \n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">Email</label>\n                  <input\n                    type=\"email\"\n                    value={user.email || ''}\n                    disabled\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100\"\n                  />\n                </div>\n                \n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">Phone (Optional)</label>\n                  <input\n                    type=\"tel\"\n                    placeholder=\"Enter your phone number\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500\"\n                  />\n                </div>\n                \n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">\n                    Consultation Date & Time\n                  </label>\n                  <div className=\"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50\">\n                    {selectedDate && selectedTime\n                      ? `${format(selectedDate, 'MMMM d, yyyy')} at ${selectedTime}`\n                      : 'Please select a date and time'}\n                  </div>\n                </div>\n                \n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">\n                    About Your Project\n                  </label>\n                  <textarea\n                    value={notes}\n                    onChange={(e) => setNotes(e.target.value)}\n                    placeholder=\"Tell us about your space and what you're looking for...\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 min-h-32\"\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  disabled={bookingStatus === 'submitting' || !selectedDate || !selectedTime}\n                  className={`w-full py-4 px-6 rounded-lg text-white font-semibold ${\n                    bookingStatus === 'submitting' || !selectedDate || !selectedTime\n                      ? 'bg-gray-400 cursor-not-allowed'\n                      : 'bg-amber-500 hover:bg-amber-600'\n                  }`}\n                >\n                  {bookingStatus === 'submitting' ? 'Booking...' : 'Book Consultation'}\n                </button>\n              </form>\n\n              {/* Booking Status Messages */}\n              {bookingStatus === 'success' && (\n                <div className=\"mt-6 p-4 bg-green-100 text-green-700 rounded-lg\">\n                  <p className=\"font-medium\">Success! Your consultation has been booked.</p>\n                  <p className=\"text-sm mt-1\">We've sent a confirmation to {user.email}.</p>\n                </div>\n              )}\n              \n              {bookingStatus === 'error' && (\n                <div className=\"mt-6 p-4 bg-red-100 text-red-700 rounded-lg\">\n                  <p className=\"font-medium\">Booking failed. Please try again.</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookConsultationPage;"],"names":["React","useState","format","addDays","isAfter","isSameDay","useAppContext","BookConsultationPage","user","loading","selectedDate","setSelectedDate","Date","selectedTime","setSelectedTime","notes","setNotes","availableSlots","setAvailableSlots","bookingStatus","setBookingStatus","generateAvailableDates","dates","currentDate","getHours","i","dateToAdd","getDay","push","generateTimeSlots","date","today","isToday","startHour","slots","hour","timeString","setHours","handleDateSelect","handleSubmit","e","FormEvent","preventDefault","alert","Promise","resolve","setTimeout","error","console","availableDates","window","dispatchEvent","CustomEvent","map","day","toString","slot","name","email","target","value"],"mappings":"2UAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,0RAA4R,EACzT,yDACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,sQAAwQ,EACrS,qCACA","ignoreList":[0]}