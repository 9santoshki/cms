{"version":3,"sources":["turbopack:///[project]/src/app/search/page.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/search/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/search/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/search/page.tsx\",\n    \"default\",\n);\n","\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from '@/context/AppContext';\nimport Header from '@/components/Header';\nimport Footer from '@/components/Footer';\nimport { Product } from '@/types';\n\nconst SearchPage = () => {\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const { fetchProducts } = useAppContext();\n\n  useEffect(() => {\n    // Read query from URL on client to avoid useSearchParams SSR warning\n    if (typeof window !== 'undefined') {\n      const params = new URLSearchParams(window.location.search);\n      const q = params.get('q') || '';\n      setQuery(q);\n      if (q) {\n        performSearch();\n      } else {\n        setSearchResults([]);\n        setLoading(false);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const performSearch = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await fetch(`/api/search?q=${encodeURIComponent(query)}`);\n      const result = await response.json();\n      \n      if (result.success) {\n        setSearchResults(result.data);\n      } else {\n        setError(result.error || 'Search failed');\n      }\n    } catch (err) {\n      setError('An error occurred during search');\n      console.error('Search error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header activePage=\"search\" />\n      \n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Search Results</h1>\n          <p className=\"text-gray-600 mt-2\">\n            {query ? `Results for \"${query}\"` : 'Please enter a search term'}\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center h-64\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"text-center py-10\">\n            <div className=\"text-red-500 text-xl\">{error}</div>\n          </div>\n        ) : (\n          <div>\n            {searchResults.length > 0 ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n                {searchResults.map((product) => (\n                  <div \n                    key={product.id} \n                    className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow cursor-pointer\"\n                    onClick={() => { window.location.href = `/products/${product.slug || product.id}`; }}\n                  >\n                    <div \n                      className=\"h-48 bg-gray-200 bg-cover bg-center\"\n                      style={{ \n                        backgroundImage: product.image_url \n                          ? `url(\"${product.image_url}\")` \n                          : `url(\"https://images.unsplash.com/photo-1526178613552-2b45c6c38395?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80\")` \n                      }}\n                    />\n                    <div className=\"p-4\">\n                      <h3 className=\"font-semibold text-lg text-gray-900\">{product.name}</h3>\n                      <p className=\"text-gray-600 text-sm mt-1 truncate\">{product.category}</p>\n                      <p className=\"text-amber-600 font-bold mt-2\">â‚¹{product.price.toLocaleString()}</p>\n                      <p className=\"text-gray-600 text-sm mt-1 line-clamp-2\">{product.description}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-10\">\n                <i className=\"fas fa-search text-5xl text-gray-300 mb-4\"></i>\n                <h3 className=\"text-xl font-semibold text-gray-700\">No results found</h3>\n                <p className=\"text-gray-600 mt-2\">\n                  {query \n                    ? `No products match \"${query}\". Try different keywords.` \n                    : 'Please enter a search term to find products.'}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n      \n      <Footer />\n    </div>\n  );\n};\n\nexport default SearchPage;"],"names":["React","useState","useEffect","useAppContext","Header","Footer","Product","SearchPage","query","setQuery","searchResults","setSearchResults","loading","setLoading","error","setError","fetchProducts","window","params","URLSearchParams","location","search","q","get","performSearch","response","fetch","encodeURIComponent","result","json","success","data","err","console","length","map","product","id","href","slug","backgroundImage","image_url","name","category","price","toLocaleString","description"],"mappings":"2UAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,yRAA2R,EACxT,wDACA,6DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qQAAuQ,EACpS,oCACA","ignoreList":[0]}