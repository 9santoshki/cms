{"version":3,"sources":["turbopack:///[project]/src/components/EnhancedCartPage.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/components/EnhancedCartPage.tsx","turbopack:///[project]/src/app/cart/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/EnhancedCartPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/EnhancedCartPage.tsx\",\n    \"default\",\n);\n","'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAppContext } from '../context/AppContext';\nimport Header from './Header';\nimport Footer from './Footer';\nimport { calculateCartTotal, calculateShippingCost, calculateOriginalCartTotal, calculateDiscountSavings } from '../utils/cartUtils';\nimport {\n  CartContainer,\n  CartHeaderSection,\n  EmptyCartSection,\n  EmptyCartContent,\n  CartItemsSection,\n  CartItemsHeader,\n  CartItemsList,\n  CartItem,\n  ItemProduct,\n  ItemImage,\n  ItemDetails,\n  ItemPrice,\n  ItemQuantity,\n  ItemTotal,\n  ItemActions,\n  CartSummarySection,\n  CartSummary,\n  SummaryDetails,\n  SummaryActions\n} from '../styles/ElegantCartStyles';\n\nconst EnhancedCartPage = () => {\n  const router = useRouter();\n\n  const navigate = (path: string) => {\n    router.push(path);\n  };\n  \n  const { cartItems, loading, error, updateCartItem, removeFromCart } = useAppContext();\n\n  const updateQuantity = (productId: number, newQuantity: number) => {\n    if (newQuantity < 1) {\n      // If quantity is less than 1, remove the item\n      removeFromCart(productId);\n      return;\n    }\n    updateCartItem(productId, newQuantity);\n  };\n\n  const subtotal = calculateCartTotal(cartItems);\n  const shipping = calculateShippingCost(subtotal);\n  const total = subtotal + shipping;\n\n  const handleCheckout = () => {\n    if (cartItems.length > 0) {\n      navigate('/checkout');\n    }\n  };\n\n  const continueShopping = () => {\n    navigate('/shop');\n  };\n\n  if (cartItems.length === 0) {\n    return (\n      <CartContainer>\n        <Header activePage=\"cart\" />\n        <CartHeaderSection>\n          <h1>Shopping Cart</h1>\n        </CartHeaderSection>\n        <EmptyCartSection>\n          <EmptyCartContent>\n            <i className=\"fas fa-shopping-cart empty-cart-icon\"></i>\n            <h2>Your cart is empty</h2>\n            <p>Looks like you haven't added any items to your cart yet.</p>\n            <button className=\"btn primary\" onClick={continueShopping}>\n              Continue Shopping\n            </button>\n          </EmptyCartContent>\n        </EmptyCartSection>\n        <Footer />\n      </CartContainer>\n    );\n  }\n\n  return (\n    <CartContainer>\n      <Header activePage=\"cart\" />\n      <CartHeaderSection>\n        <h1>Shopping Cart</h1>\n      </CartHeaderSection>\n      \n      {error.cart && <div className=\"error-message\">{error.cart}</div>}\n      \n      <CartItemsSection>\n        <CartItemsHeader>\n          <div className=\"header-item\">Product</div>\n          <div className=\"header-price\">Price</div>\n          <div className=\"header-quantity\">Quantity</div>\n          <div className=\"header-total\">Total</div>\n          <div className=\"header-actions\"></div>\n        </CartItemsHeader>\n        \n        <CartItemsList>\n          {cartItems.map((item, index) => {\n            // Create a unique key to avoid duplicate key errors\n            // Use product_id first (most reliable), then id, then index as fallback\n            const uniqueKey = item.product_id ? `prod-${item.product_id}` : \n                             item.id ? `item-${item.id}-${index}` : \n                             `idx-${index}`;\n            \n            const productId = item.product_id || item.id;\n            \n            if (!productId) {\n              console.error('Cart item missing product_id and id:', item);\n              return null;\n            }\n            \n            return (\n              <CartItem key={uniqueKey}>\n                <ItemProduct>\n                  <ItemImage $imageClass={item.imageClass || 'modern'} />\n                  <ItemDetails>\n                    <h3>{item.name}</h3>\n                    <p>{item.description}</p>\n                  </ItemDetails>\n                </ItemProduct>\n                \n                <ItemPrice>\n                  ₹{typeof item.price === 'number' \n                    ? item.price.toLocaleString() \n                    : parseFloat(item.price || '0').toLocaleString()}\n                </ItemPrice>\n                \n                <ItemQuantity>\n                  <button \n                    className=\"quantity-btn\"\n                    onClick={() => updateQuantity(productId, item.quantity - 1)}\n                    disabled={loading.cart || item.quantity <= 1}\n                  >\n                    <i className=\"fas fa-minus\"></i>\n                  </button>\n                  <span className=\"quantity\">{item.quantity}</span>\n                  <button \n                    className=\"quantity-btn\"\n                    onClick={() => updateQuantity(productId, item.quantity + 1)}\n                    disabled={loading.cart}\n                  >\n                    <i className=\"fas fa-plus\"></i>\n                  </button>\n                </ItemQuantity>\n                \n                <ItemTotal>\n                  ₹{typeof item.price === 'number' \n                    ? (item.price * item.quantity).toLocaleString() \n                    : (parseFloat(item.price || '0') * item.quantity).toLocaleString()}\n                </ItemTotal>\n                \n                <ItemActions>\n                  <button \n                    className=\"remove-btn\"\n                    onClick={() => removeFromCart(productId)}\n                    disabled={loading.cart}\n                  >\n                    <i className=\"fas fa-trash-alt\"></i>\n                  </button>\n                </ItemActions>\n              </CartItem>\n            );\n          })}\n        </CartItemsList>\n      </CartItemsSection>\n      \n      <CartSummarySection>\n        <CartSummary>\n          <h2>Order Summary</h2>\n          \n          <SummaryDetails>\n            <div className=\"summary-row\">\n              <span>Original Price</span>\n              <span>₹{calculateOriginalCartTotal(cartItems).toLocaleString()}</span>\n            </div>\n            <div className=\"summary-row\" style={{ color: '#28a745', fontWeight: '600' }}>\n              <span>You saved</span>\n              <span>-₹{calculateDiscountSavings(cartItems).toLocaleString()}</span>\n            </div>\n            <div className=\"summary-row\">\n              <span>Subtotal</span>\n              <span>₹{subtotal.toLocaleString()}</span>\n            </div>\n            \n            <div className=\"summary-row\">\n              <span>Shipping</span>\n              <span>{shipping === 0 ? 'FREE' : `₹${shipping.toLocaleString()}`}</span>\n            </div>\n            \n            <div className=\"summary-row total\">\n              <span>Total</span>\n              <span>₹{total.toLocaleString()}</span>\n            </div>\n          </SummaryDetails>\n          \n          <SummaryActions>\n            <button className=\"btn secondary\" onClick={continueShopping}>\n              <i className=\"fas fa-arrow-left\"></i> Continue Shopping\n            </button>\n          </SummaryActions>\n        </CartSummary>\n        <button \n          className=\"btn primary\" \n          onClick={handleCheckout}\n          disabled={loading.cart || cartItems.length === 0}\n          style={{ marginTop: '20px', width: '100%', maxWidth: '450px' }}\n        >\n          Proceed to Checkout\n        </button>\n      </CartSummarySection>\n      \n      <Footer />\n    </CartContainer>\n  );\n};\n\nexport default EnhancedCartPage;","import EnhancedCartPage from '@/components/EnhancedCartPage'\n\nexport default function Cart() {\n  return <EnhancedCartPage />\n}"],"names":["React","useRouter","useAppContext","Header","Footer","calculateCartTotal","calculateShippingCost","calculateOriginalCartTotal","calculateDiscountSavings","CartContainer","CartHeaderSection","EmptyCartSection","EmptyCartContent","CartItemsSection","CartItemsHeader","CartItemsList","CartItem","ItemProduct","ItemImage","ItemDetails","ItemPrice","ItemQuantity","ItemTotal","ItemActions","CartSummarySection","CartSummary","SummaryDetails","SummaryActions","EnhancedCartPage","router","navigate","path","push","cartItems","loading","error","updateCartItem","removeFromCart","updateQuantity","productId","newQuantity","subtotal","shipping","total","handleCheckout","length","continueShopping","cart","map","item","index","uniqueKey","product_id","id","console","imageClass","name","description","price","toLocaleString","parseFloat","quantity","color","fontWeight","marginTop","width","maxWidth","Cart"],"mappings":"2UAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qSAAuS,EACpU,oEACA,6DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,iRAAmR,EAChT,gDACA,kIELJ,EAA6B,CAAtB4B,CAAqD,CAAA,CAAA,OAE7C,IAF6C,EAArC,GAECuC,GAFK,CAEDA,AAC1B,CAD0B,EAAG,GACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAgB,CAAA,CAAG,EAC7B","ignoreList":[0]}