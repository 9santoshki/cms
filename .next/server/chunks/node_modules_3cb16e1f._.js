module.exports=[49512,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.parseCookie=d,r.parse=d,r.stringifyCookie=function(e,t){let r=t?.encode||encodeURIComponent,i=[];for(let t of Object.keys(e)){let a=e[t];if(void 0===a)continue;if(!s.test(t))throw TypeError(`cookie name is invalid: ${t}`);let n=r(a);if(!o.test(n))throw TypeError(`cookie val is invalid: ${a}`);i.push(`${t}=${n}`)}return i.join("; ")},r.stringifySetCookie=p,r.serialize=p,r.parseSetCookie=function(e,t){let r=t?.decode||g,i=e.length,s=m(e,0,i),o=f(e,0,s),a=-1===o?{name:"",value:r(h(e,0,s))}:{name:h(e,0,o),value:r(h(e,o+1,s))},n=s+1;for(;n<i;){let t=m(e,n,i),r=f(e,n,t),s=-1===r?h(e,n,t):h(e,n,r),o=-1===r?void 0:h(e,r+1,t);switch(s.toLowerCase()){case"httponly":a.httpOnly=!0;break;case"secure":a.secure=!0;break;case"partitioned":a.partitioned=!0;break;case"domain":a.domain=o;break;case"path":a.path=o;break;case"max-age":o&&c.test(o)&&(a.maxAge=Number(o));break;case"expires":if(!o)break;let l=new Date(o);Number.isFinite(l.valueOf())&&(a.expires=l);break;case"priority":if(!o)break;let u=o.toLowerCase();("low"===u||"medium"===u||"high"===u)&&(a.priority=u);break;case"samesite":if(!o)break;let d=o.toLowerCase();("lax"===d||"strict"===d||"none"===d)&&(a.sameSite=d)}n=t+1}return a},r.stringifySetCookie=p,r.serialize=p;let s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,c=/^-?\d+$/,l=Object.prototype.toString,u=((i=function(){}).prototype=Object.create(null),i);function d(e,t){let r=new u,i=e.length;if(i<2)return r;let s=t?.decode||g,o=0;do{let t=f(e,o,i);if(-1===t)break;let a=m(e,o,i);if(t>a){o=e.lastIndexOf(";",t-1)+1;continue}let n=h(e,o,t);void 0===r[n]&&(r[n]=s(h(e,t+1,a))),o=a+1}while(o<i)return r}function p(e,t,r){let i="object"==typeof e?e:{name:e,value:String(t),...r},c=("object"==typeof t?t:r)?.encode||encodeURIComponent;if(!s.test(i.name))throw TypeError(`argument name is invalid: ${i.name}`);let u=i.value?c(i.value):"";if(!o.test(u))throw TypeError(`argument val is invalid: ${i.value}`);let d=i.name+"="+u;if(void 0!==i.maxAge){if(!Number.isInteger(i.maxAge))throw TypeError(`option maxAge is invalid: ${i.maxAge}`);d+="; Max-Age="+i.maxAge}if(i.domain){if(!a.test(i.domain))throw TypeError(`option domain is invalid: ${i.domain}`);d+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError(`option path is invalid: ${i.path}`);d+="; Path="+i.path}if(i.expires){var p;if(p=i.expires,"[object Date]"!==l.call(p)||!Number.isFinite(i.expires.valueOf()))throw TypeError(`option expires is invalid: ${i.expires}`);d+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(d+="; HttpOnly"),i.secure&&(d+="; Secure"),i.partitioned&&(d+="; Partitioned"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():void 0){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${i.priority}`)}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"none":d+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${i.sameSite}`)}return d}function m(e,t,r){let i=e.indexOf(";",t);return -1===i?r:i}function f(e,t,r){let i=e.indexOf("=",t);return i<r?i:-1}function h(e,t,r){let i=t,s=r;do{let t=e.charCodeAt(i);if(32!==t&&9!==t)break}while(++i<s)for(;s>i;){let t=e.charCodeAt(s-1);if(32!==t&&9!==t)break;s--}return e.slice(i,s)}function g(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},42395,(e,t,r)=>{},58357,e=>{"use strict";var t=e.i(47909),r=e.i(74017),i=e.i(96250),s=e.i(59756),o=e.i(61916),a=e.i(14444),n=e.i(37092),c=e.i(69741),l=e.i(16795),u=e.i(87718),d=e.i(95169),p=e.i(47587),m=e.i(66012),f=e.i(70101),h=e.i(26937),g=e.i(10372),y=e.i(93695);e.i(52474);var w=e.i(5232),v=e.i(89171),I=e.i(87464),b=e.i(49512);b.parse,b.serialize;let k={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},x=/^(.*)[.](0|[1-9][0-9]*)$/;function E(e,t){if(e===t)return!0;let r=e.match(x);return!!r&&r[1]===t}function R(e,t,r){let i=r??3180,s=encodeURIComponent(t);if(s.length<=i)return[{name:e,value:t}];let o=[];for(;s.length>0;){let e=s.slice(0,i),t=e.lastIndexOf("%");t>i-3&&(e=e.slice(0,t));let r="";for(;e.length>0;)try{r=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}o.push(r),s=s.slice(e.length)}return o.map((t,r)=>({name:`${e}.${r}`,value:t}))}async function C(e,t){let r=await t(e);if(r)return r;let i=[];for(let r=0;;r++){let s=`${e}.${r}`,o=await t(s);if(!o)break;i.push(o)}return i.length>0?i.join(""):null}let A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),S=" 	\n\r=".split(""),O=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<S.length;t+=1)e[S[t].charCodeAt(0)]=-2;for(let t=0;t<A.length;t+=1)e[A[t].charCodeAt(0)]=t;return e})();function j(e){let t=[],r=0,i=0;if(function(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){let t=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(i,t)}}(e,e=>{for(r=r<<8|e,i+=8;i>=6;){let e=r>>i-6&63;t.push(A[e]),i-=6}}),i>0)for(r<<=6-i,i=6;i>=6;){let e=r>>i-6&63;t.push(A[e]),i-=6}return t.join("")}function q(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},s=0,o=0;for(let t=0;t<e.length;t+=1){let a=O[e.charCodeAt(t)];if(a>-1)for(s=s<<6|a,o+=6;o>=8;)(function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}})(s>>o-8&255,i,r),o-=8;else if(-2===a)continue;else throw Error(`Invalid Base64-URL character "${e.at(t)}" at position ${t}`)}return t.join("")}let N="base64-";async function _({getAll:e,setAll:t,setItems:r,removedItems:i},s){let o=s.cookieEncoding,a=s.cookieOptions??null,n=await e([...r?Object.keys(r):[],...i?Object.keys(i):[]]),c=n?.map(({name:e})=>e)||[],l=Object.keys(i).flatMap(e=>c.filter(t=>E(t,e))),u=Object.keys(r).flatMap(e=>{let t=new Set(c.filter(t=>E(t,e))),i=r[e];"base64url"===o&&(i=N+j(i));let s=R(e,i);return s.forEach(e=>{t.delete(e.name)}),l.push(...t),s}),d={...k,...a,maxAge:0},p={...k,...a,maxAge:k.maxAge};delete d.name,delete p.name,await t([...l.map(e=>({name:e,value:"",options:d})),...u.map(({name:e,value:t})=>({name:e,value:t,options:p}))])}function M(e,t,r){if(!e||!t)throw Error(`Your project's URL and Key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:i,getAll:s,setAll:o,setItems:a,removedItems:n}=function(e,t){let r,i,s=e.cookies??null,o=e.cookieEncoding,a={},n={};if(s)if("get"in s){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,r)=>`${e}.${r}`)]),r=[];for(let e=0;e<t.length;e+=1){let i=await s.get(t[e]);(i||"string"==typeof i)&&r.push({name:t[e],value:i})}return r};if(r=async t=>await e(t),"set"in s&&"remove"in s)i=async e=>{for(let t=0;t<e.length;t+=1){let{name:r,value:i,options:o}=e[t];i?await s.set(r,i,o):await s.remove(r,o)}};else if(t)i=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in s)if(r=async()=>await s.getAll(),"setAll"in s)i=s.setAll;else if(t)i=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${t?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).`);else if(t||1)if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else r=()=>[],i=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};else r=()=>{let e;return Object.keys(e=(0,b.parse)(document.cookie)).map(t=>({name:t,value:e[t]??""}))},i=e=>{e.forEach(({name:e,value:t,options:r})=>{document.cookie=(0,b.serialize)(e,t,r)})};return t?{getAll:r,setAll:i,setItems:a,removedItems:n,storage:{isServer:!0,getItem:async e=>{if("string"==typeof a[e])return a[e];if(n[e])return null;let t=await r([e]),i=await C(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!i)return null;let s=i;return"string"==typeof i&&i.startsWith(N)&&(s=q(i.substring(N.length))),s},setItem:async(t,s)=>{t.endsWith("-code-verifier")&&await _({getAll:r,setAll:i,setItems:{[t]:s},removedItems:{}},{cookieOptions:e?.cookieOptions??null,cookieEncoding:o}),a[t]=s,delete n[t]},removeItem:async e=>{delete a[e],n[e]=!0}}}:{getAll:r,setAll:i,setItems:a,removedItems:n,storage:{isServer:!1,getItem:async e=>{let t=await r([e]),i=await C(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!i)return null;let s=i;return i.startsWith(N)&&(s=q(i.substring(N.length))),s},setItem:async(t,s)=>{let a=await r([t]),n=new Set((a?.map(({name:e})=>e)||[]).filter(e=>E(e,t))),c=s;"base64url"===o&&(c=N+j(s));let l=R(t,c);l.forEach(({name:e})=>{n.delete(e)});let u={...k,...e?.cookieOptions,maxAge:0},d={...k,...e?.cookieOptions,maxAge:k.maxAge};delete u.name,delete d.name;let p=[...[...n].map(e=>({name:e,value:"",options:u})),...l.map(({name:e,value:t})=>({name:e,value:t,options:d}))];p.length>0&&await i(p)},removeItem:async t=>{let s=await r([t]),o=(s?.map(({name:e})=>e)||[]).filter(e=>E(e,t)),a={...k,...e?.cookieOptions,maxAge:0};delete a.name,o.length>0&&await i(o.map(e=>({name:e,value:"",options:a})))}}}}({...r,cookieEncoding:r?.cookieEncoding??"base64url"},!0),c=(0,I.createClient)(e,t,{...r,global:{...r?.global,headers:{...r?.global?.headers,"X-Client-Info":"supabase-ssr/0.7.0 createServerClient"}},auth:{...r?.cookieOptions?.name?{storageKey:r.cookieOptions.name}:null,...r?.auth,flowType:"pkce",autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!0,storage:i}});return c.auth.onAuthStateChange(async e=>{(Object.keys(a).length>0||Object.keys(n).length>0)&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e||"PASSWORD_RECOVERY"===e||"SIGNED_OUT"===e||"MFA_CHALLENGE_VERIFIED"===e)&&await _({getAll:s,setAll:o,setItems:a,removedItems:n},{cookieOptions:r?.cookieOptions??null,cookieEncoding:r?.cookieEncoding??"base64url"})}),c}async function T(e){let t=M("https://fykdwqlayqcxycrvbhew.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a2R3cWxheXFjeHljcnZiaGV3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNzIxMTMsImV4cCI6MjA3ODY0ODExM30.MT3Ph18Rz6pWy6vL-oitq5buSwJ_Jk1imhlCekho8xo",{cookies:{get:t=>e.cookies.get(t)?.value}});try{let{data:{session:e},error:r}=await t.auth.getSession();if(r||!e)return console.error("Session error:",r),null;return e.user.id}catch(e){return console.error("Error getting user session:",e),null}}async function J(e){try{let t=await T(e);if(!t)return v.NextResponse.json({success:!0,data:[]},{status:200});{let r=M("https://fykdwqlayqcxycrvbhew.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a2R3cWxheXFjeHljcnZiaGV3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNzIxMTMsImV4cCI6MjA3ODY0ODExM30.MT3Ph18Rz6pWy6vL-oitq5buSwJ_Jk1imhlCekho8xo",{cookies:{get:t=>e.cookies.get(t)?.value}}),{data:i,error:s}=await r.from("cart_items").select(`
          id,
          product_id,
          quantity,
          products (id, name, price, image_url)
        `).eq("user_id",t);if(s)return console.error("Error fetching cart items:",s),v.NextResponse.json({success:!1,error:"Failed to fetch cart items"},{status:500});let o=i?.map(e=>({id:e.id,product_id:e.product_id,quantity:e.quantity,name:e.products?.name||"Unknown Product",price:e.products?.price||0,image_url:e.products?.image_url||null,originalPrice:null,discount:0}))||[];return v.NextResponse.json({success:!0,data:o},{status:200})}}catch(e){return console.error("Error fetching cart:",e),v.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function P(e){try{let t=await T(e);if(!t)return v.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let r=M("https://fykdwqlayqcxycrvbhew.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a2R3cWxheXFjeHljcnZiaGV3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNzIxMTMsImV4cCI6MjA3ODY0ODExM30.MT3Ph18Rz6pWy6vL-oitq5buSwJ_Jk1imhlCekho8xo",{cookies:{get:t=>e.cookies.get(t)?.value}}),{product_id:i,quantity:s=1}=await e.json();if(!i||"number"!=typeof i||i<=0)return v.NextResponse.json({success:!1,error:"Valid product ID is required"},{status:400});if("number"!=typeof s||isNaN(s)||s<=0)return v.NextResponse.json({success:!1,error:"Valid positive quantity is required"},{status:400});let{data:o,error:a}=await r.from("cart_items").select("id, quantity").eq("user_id",t).eq("product_id",i).single();if(o){let e=o.quantity+s,{data:t,error:i}=await r.from("cart_items").update({quantity:e}).eq("id",o.id).select("*, products(name, price, image_url)").single();if(i)return console.error("Error updating cart item:",i),v.NextResponse.json({success:!1,error:"Failed to update cart item"},{status:500});return v.NextResponse.json({success:!0,data:{id:t.id,product_id:t.product_id,name:t.products?.name||"Unknown Product",price:t.products?.price||0,quantity:t.quantity,image_url:t.products?.image_url||null}},{status:200})}{let{data:e,error:o}=await r.from("cart_items").insert([{user_id:t,product_id:i,quantity:s}]).select("*, products(name, price, image_url)").single();if(o)if(!("23505"===o.code||o.message?.toLowerCase().includes("duplicate")||o.message?.toLowerCase().includes("unique")))return console.error("Error inserting cart item:",o),v.NextResponse.json({success:!1,error:"Failed to add item to cart"},{status:500});else{let{data:e,error:o}=await r.from("cart_items").update({quantity:s}).eq("user_id",t).eq("product_id",i).select("*, products(name, price, image_url)").single();if(o)return v.NextResponse.json({success:!1,error:"Failed to add item to cart"},{status:500});return v.NextResponse.json({success:!0,data:{id:e.id,product_id:e.product_id,name:e.products?.name||"Unknown Product",price:e.products?.price||0,quantity:e.quantity,image_url:e.products?.image_url||null}},{status:200})}return v.NextResponse.json({success:!0,data:{id:e.id,product_id:e.product_id,name:e.products?.name||"Unknown Product",price:e.products?.price||0,quantity:e.quantity,image_url:e.products?.image_url||null}},{status:200})}}catch(e){return console.error("Error adding to cart:",e),v.NextResponse.json({success:!1,error:e.message||"Internal server error"},{status:500})}}async function U(e){try{let t=await T(e);if(!t)return v.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let r=M("https://fykdwqlayqcxycrvbhew.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a2R3cWxheXFjeHljcnZiaGV3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNzIxMTMsImV4cCI6MjA3ODY0ODExM30.MT3Ph18Rz6pWy6vL-oitq5buSwJ_Jk1imhlCekho8xo",{cookies:{get:t=>e.cookies.get(t)?.value}}),{product_id:i,quantity:s}=await e.json();if(!i||"number"!=typeof i||i<=0)return v.NextResponse.json({success:!1,error:"Valid product ID is required"},{status:400});if("number"!=typeof s||isNaN(s))return v.NextResponse.json({success:!1,error:"Valid quantity is required"},{status:400});if(s<=0){let{error:e}=await r.from("cart_items").delete().eq("user_id",t).eq("product_id",i);if(e)return console.error("Error removing cart item:",e),v.NextResponse.json({success:!1,error:"Failed to remove item from cart"},{status:500});return v.NextResponse.json({success:!0,message:"Item removed from cart"},{status:200})}{let{data:e,error:o}=await r.from("cart_items").update({quantity:s}).eq("user_id",t).eq("product_id",i).select("*, products(name, price, image_url)").single();if(o)return console.error("Error updating cart item:",o),v.NextResponse.json({success:!1,error:"Failed to update cart item"},{status:500});return v.NextResponse.json({success:!0,data:{id:e.id,product_id:e.product_id,name:e.products?.name||"Unknown Product",price:e.products?.price||0,quantity:e.quantity,image_url:e.products?.image_url||null}},{status:200})}}catch(e){return console.error("Error updating cart:",e),v.NextResponse.json({success:!1,error:e.message||"Internal server error"},{status:500})}}async function z(e){try{let t=await T(e);if(!t)return v.NextResponse.json({success:!0,message:"Cart cleared"},{status:200});{let r=M("https://fykdwqlayqcxycrvbhew.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5a2R3cWxheXFjeHljcnZiaGV3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNzIxMTMsImV4cCI6MjA3ODY0ODExM30.MT3Ph18Rz6pWy6vL-oitq5buSwJ_Jk1imhlCekho8xo",{cookies:{get:t=>e.cookies.get(t)?.value}}),{error:i}=await r.from("cart_items").delete().eq("user_id",t);if(i)return console.error("Error clearing cart:",i),v.NextResponse.json({success:!1,error:"Failed to clear cart"},{status:500});return v.NextResponse.json({success:!0,message:"Cart cleared"},{status:200})}}catch(e){return console.error("Error clearing cart:",e),v.NextResponse.json({success:!1,error:e.message||"Internal server error"},{status:500})}}e.i(42395),e.s(["DELETE",()=>z,"GET",()=>J,"POST",()=>P,"PUT",()=>U],2637);var D=e.i(2637);let F=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/cart/route",pathname:"/api/cart",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/cart/route.ts",nextConfigOutput:"",userland:D}),{workAsyncStorage:$,workUnitAsyncStorage:L,serverHooks:H}=F;function Z(){return(0,i.patchFetch)({workAsyncStorage:$,workUnitAsyncStorage:L})}async function V(e,t,i){F.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/cart/route";v=v.replace(/\/index$/,"")||"/";let I=await F.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!I)return t.statusCode=400,t.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve()),null;let{buildId:b,params:k,nextConfig:x,parsedUrl:E,isDraftMode:R,prerenderManifest:C,routerServerContext:A,isOnDemandRevalidate:S,revalidateOnlyGenerated:O,resolvedPathname:j,clientReferenceManifest:q,serverActionsManifest:N}=I,_=(0,c.normalizeAppPath)(v),M=!!(C.dynamicRoutes[_]||C.routes[j]),T=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,E,!1):t.end("This page could not be found"),null);if(M&&!R){let e=!!C.routes[j],t=C.dynamicRoutes[_];if(t&&!1===t.fallback&&!e){if(x.experimental.adapterPath)return await T();throw new y.NoFallbackError}}let J=null;!M||F.isDev||R||(J="/index"===(J=j)?"/":J);let P=!0===F.isDev||!M,U=M&&!P;N&&q&&(0,a.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:q,serverActionsManifest:N,serverModuleMap:(0,n.createServerModuleMap)({serverActionsManifest:N})});let z=e.method||"GET",D=(0,o.getTracer)(),$=D.getActiveScopeSpan(),L={params:k,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!x.experimental.authInterrupts},cacheComponents:!!x.cacheComponents,supportsDynamicResponse:P,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:x.cacheLife,waitUntil:i.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,i)=>F.onRequestError(e,t,i,A)},sharedContext:{buildId:b}},H=new l.NodeNextRequest(e),Z=new l.NodeNextResponse(t),V=u.NextRequestAdapter.fromNodeNextRequest(H,(0,u.signalFromNodeResponse)(t));try{let a=async e=>F.handle(V,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=D.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=r.get("next.route");if(i){let t=`${z} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${z} ${v}`)}),n=!!(0,s.getRequestMeta)(e,"minimalMode"),c=async s=>{var o,c;let l=async({previousCacheEntry:r})=>{try{if(!n&&S&&O&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await a(s);e.fetchMetrics=L.renderOpts.fetchMetrics;let c=L.renderOpts.pendingWaitUntil;c&&i.waitUntil&&(i.waitUntil(c),c=void 0);let l=L.renderOpts.collectedTags;if(!M)return await (0,m.sendResponse)(H,Z,o,L.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(o.headers);l&&(t[g.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,i=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:i}}}}catch(t){throw(null==r?void 0:r.isStale)&&await F.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:S})},A),t}},u=await F.handleResponse({req:e,nextConfig:x,cacheKey:J,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:O,responseGenerator:l,waitUntil:i.waitUntil,isMinimalMode:n});if(!M)return null;if((null==u||null==(o=u.value)?void 0:o.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(c=u.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});n||t.setHeader("x-nextjs-cache",S?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),R&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,f.fromNodeOutgoingHttpHeaders)(u.value.headers);return n&&M||d.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,m.sendResponse)(H,Z,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};$?await c($):await D.withPropagatedContext(e.headers,()=>D.trace(d.BaseServerSpan.handleRequest,{spanName:`${z} ${v}`,kind:o.SpanKind.SERVER,attributes:{"http.method":z,"http.target":e.url}},c))}catch(t){if(t instanceof y.NoFallbackError||await F.onRequestError(e,t,{routerKind:"App Router",routePath:_,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:S})}),M)throw t;return await (0,m.sendResponse)(H,Z,new Response(null,{status:500})),null}}e.s(["handler",()=>V,"patchFetch",()=>Z,"routeModule",()=>F,"serverHooks",()=>H,"workAsyncStorage",()=>$,"workUnitAsyncStorage",()=>L],58357)}];

//# sourceMappingURL=node_modules_3cb16e1f._.js.map