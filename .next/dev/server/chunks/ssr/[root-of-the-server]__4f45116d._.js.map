{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/components/NewShopPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/NewShopPage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/NewShopPage.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/components/NewShopPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/NewShopPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/NewShopPage.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/components/NewShopPage.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useProduct } from '../context/ProductContext';\nimport { useCart } from '../context/CartContext';\nimport { useAuth } from '../context/AuthContext';\nimport Header from './Header';\nimport Footer from './Footer';\nimport ProductDetail from './ProductDetail'; // Assuming this component exists\n\n// Import elegant shop page styles\nimport {\n  ShopContainer,\n  ShopHero,\n  MainContent,\n  ProductsSection,\n  ProductFilters,\n  FilterSection,\n  FilterHeader,\n  FilterContent,\n  FilterOption,\n  ProductsGrid,\n  ProductCard,\n  ProductImage,\n  ProductInfo,\n  ProductPrice,\n  Pagination,\n  PageButton,\n  LoadingSpinner,\n  ErrorContainer\n} from '../styles/NewShopStyles';\n\nconst NewShopPage = () => {\n  const router = useRouter();\n\n  const {\n    products,\n    loading: productLoading,\n    error: productError,\n    fetchProducts\n  } = useProduct();\n\n  const { \n    items: cartItems,\n    addItem: addToCart,\n    cartCount\n  } = useCart();\n\n  const { user } = useAuth();\n\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [filters, setFilters] = useState({\n    category: 'All',\n    priceRange: 'All',\n    sortBy: 'name'\n  });\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage] = useState(8); // Show 8 products per page\n\n  // Fetch products when component mounts\n  useEffect(() => {\n    // Fetch products to ensure we have current data\n    // Only fetch if not already loading to avoid conflicts\n    if (!productLoading.products) {\n      fetchProducts();\n    }\n  }, []); // Empty dependency array to run once on mount\n\n  // Filter and sort products based on selected filters\n  const filteredProducts = products\n    .filter(product => {\n      if (filters.category !== 'All') {\n        return product.category === filters.category;\n      }\n      return true;\n    })\n    .sort((a, b) => {\n      if (filters.sortBy === 'name') {\n        return a.name.localeCompare(b.name);\n      } else if (filters.sortBy === 'price-low') {\n        return a.price - b.price;\n      } else if (filters.sortBy === 'price-high') {\n        return b.price - a.price;\n      }\n      return 0;\n    });\n\n  // Pagination logic\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentItems = filteredProducts.slice(indexOfFirstItem, indexOfLastItem);\n  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);\n\n  const categories = ['All', ...new Set(products.map(p => p.category).filter(Boolean))];\n\n  const openProductDetail = (product: any) => {\n    setSelectedProduct(product);\n  };\n\n  const handleFilterChange = (filterType: string, value: string | undefined) => {\n    setFilters(prev => ({\n      ...prev,\n      [filterType]: value || ''\n    }));\n    setCurrentPage(1); // Reset to first page when filters change\n  };\n\n\n\n  const handleAddToCart = (product: any) => {\n    // Check if user is authenticated\n    if (!user) {\n      // Store the pending cart action in localStorage\n      localStorage.setItem('pendingCartAction', JSON.stringify({\n        product: product,\n        quantity: 1\n      }));\n      // Trigger a global event or callback to show login modal\n      window.dispatchEvent(new CustomEvent('showLoginModal', { detail: { product, quantity: 1 } }));\n    } else {\n      // User is authenticated, add directly to cart\n      addToCart({\n        id: Date.now(), // temporary ID for cart item\n        product_id: product.id,\n        quantity: 1,\n        name: product.name,\n        description: product.description,\n        price: product.price,\n        image_url: product.primary_image || product.image_url\n      });\n    }\n  };\n\n  if (productLoading) {\n    return (\n      <ShopContainer>\n        <LoadingSpinner />\n      </ShopContainer>\n    );\n  }\n\n  if (productError) {\n    return (\n      <ErrorContainer>\n        <p>{productError}</p>\n        <button className=\"btn primary\" onClick={() => window.location.reload()}>\n          Retry\n        </button>\n      </ErrorContainer>\n    );\n  }\n\n  return (\n    <ShopContainer>\n      {/* Navigation Bar with Search Overlay */}\n      <Header activePage=\"shop\" />\n\n      {/* Main Content with reduced margins */}\n      <MainContent style={{ marginTop: '0' }}>\n        <ProductFilters>\n          {/* Category Filter */}\n          <FilterSection>\n            <FilterHeader>\n              <h3>CATEGORIES</h3>\n            </FilterHeader>\n            <FilterContent>\n              {categories.map(category => (\n                <FilterOption\n                  key={category}\n                  $active={filters.category === category}\n                  onClick={() => handleFilterChange('category', category)}\n                >\n                  {category}\n                </FilterOption>\n              ))}\n            </FilterContent>\n          </FilterSection>\n\n          {/* Price Range Filter */}\n          <FilterSection>\n            <FilterHeader>\n              <h3>PRICE RANGE</h3>\n            </FilterHeader>\n            <FilterContent>\n              <FilterOption\n                  $active={filters.priceRange === 'All'}\n                  onClick={() => handleFilterChange('priceRange', 'All')}\n                >\n                  All Prices\n                </FilterOption>\n                <FilterOption\n                  $active={filters.priceRange === 'Under ₹5,000'}\n                  onClick={() => handleFilterChange('priceRange', 'Under ₹5,000')}\n                >\n                  Under ₹5,000\n                </FilterOption>\n                <FilterOption\n                  $active={filters.priceRange === '₹5,000 - ₹15,000'}\n                  onClick={() => handleFilterChange('priceRange', '₹5,000 - ₹15,000')}\n                >\n                  ₹5,000 - ₹15,000\n                </FilterOption>\n                <FilterOption\n                  $active={filters.priceRange === 'Over ₹15,000'}\n                  onClick={() => handleFilterChange('priceRange', 'Over ₹15,000')}\n                >\n                  Over ₹15,000\n                </FilterOption>\n            </FilterContent>\n          </FilterSection>\n\n          {/* Sort Options */}\n          <FilterSection>\n            <FilterHeader>\n              <h3>SORT BY</h3>\n            </FilterHeader>\n            <FilterContent>\n              <FilterOption\n                  $active={filters.sortBy === 'name'}\n                  onClick={() => handleFilterChange('sortBy', 'name')}\n                >\n                  Name A-Z\n                </FilterOption>\n                <FilterOption\n                  $active={filters.sortBy === 'price-low'}\n                  onClick={() => handleFilterChange('sortBy', 'price-low')}\n                >\n                  Price: Low to High\n                </FilterOption>\n                <FilterOption\n                  $active={filters.sortBy === 'price-high'}\n                  onClick={() => handleFilterChange('sortBy', 'price-high')}\n                >\n                  Price: High to Low\n                </FilterOption>\n            </FilterContent>\n          </FilterSection>\n        </ProductFilters>\n\n        {/* Products Grid */}\n        <ProductsSection>\n\n          <div style={{ \n            display: 'grid', \n            gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', \n            gap: '20px', \n            padding: '20px' \n          }}>\n            {currentItems && currentItems.length > 0 ? (\n              currentItems.map(product => (\n                <div \n                  key={product.id} \n                  style={{ \n                    display: 'flex', \n                    flexDirection: 'column', \n                    height: '100%', \n                    minWidth: '250px',\n                    maxWidth: '300px',\n                    margin: '0 auto'\n                  }}\n                >\n                  <ProductCard\n                    onClick={() => router.push(`/products/${product.slug || product.id}`)}\n                    style={{ cursor: 'pointer', display: 'flex', flexDirection: 'column', height: '100%', width: '100%' }}\n                  >\n                    <ProductImage imageClass={product.imageClass} imageUrl={product.primary_image || product.image_url}>\n                    </ProductImage>\n                    <ProductInfo style={{ flex: 1, display: 'flex', flexDirection: 'column', justifyContent: 'space-between' }}>\n                      <div>\n                        <h4 style={{ fontSize: '1rem', margin: '8px 0 4px 0' }}>{product.name}</h4>\n                        <p style={{ fontSize: '0.85rem', color: '#666', margin: '4px 0' }}>{product.description}</p>\n                      </div>\n                      <div style={{ display: 'flex', flexDirection: 'column', gap: '2px', margin: '8px 0' }}>\n                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\n                            <span style={{ fontWeight: 'bold', color: '#e74c3c', fontSize: '1.1rem', marginRight: '6px' }}>\n                              ₹{product.price?.toLocaleString()}\n                            </span>\n                            <span style={{ textDecoration: 'line-through', color: '#999', fontSize: '0.85rem' }}>\n                              ₹{product.price ? (product.price * 1.2).toLocaleString() : product.price?.toLocaleString()}\n                            </span>\n                          </div>\n                          <div style={{ position: 'relative', display: 'inline-block' }}>\n                            <button\n                              className=\"btn secondary\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleAddToCart(product);\n                              }}\n                              style={{ width: '40px', height: '40px', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '0', minWidth: '40px', position: 'relative', zIndex: 1 }}\n                              aria-label=\"Add to cart\"\n                            >\n                              <i className=\"fas fa-shopping-cart\"></i>\n                            </button>\n                            {(() => {\n                              const cartItem = cartItems.find(item => item.product_id === product.id);\n                              return cartItem ? (\n                                <span style={{\n                                  position: 'absolute',\n                                  top: '-10px',\n                                  right: '-10px',\n                                  backgroundColor: '#e74c3c',\n                                  color: 'white',\n                                  borderRadius: '50%',\n                                  width: '20px',\n                                  height: '20px',\n                                  fontSize: '0.7rem',\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  justifyContent: 'center',\n                                  fontWeight: 'bold',\n                                  border: '2px solid white',\n                                  zIndex: 2,\n                                  boxShadow: '0 2px 4px rgba(0,0,0,0.2)'\n                                }}>\n                                  {cartItem.quantity}\n                                </span>\n                              ) : null;\n                            })()}\n                          </div>\n                        </div>\n                      </div>\n                    </ProductInfo>\n                  </ProductCard>\n                </div>\n              ))\n            ) : (\n              <div style={{ gridColumn: '1 / -1', textAlign: 'center', padding: '40px' }}>\n                <h3>No products available</h3>\n                <p>Check back later for new products.</p>\n              </div>\n            )}\n          </div>\n\n          {/* Pagination */}\n          {totalPages > 1 && (\n            <Pagination>\n              <PageButton\n                onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n                disabled={currentPage === 1}\n              >\n                Previous\n              </PageButton>\n\n              {[...Array(totalPages)].map((_, i) => (\n                <PageButton\n                $active={currentPage === i + 1}\n                onClick={() => setCurrentPage(i + 1)}\n              >\n                {i + 1}\n              </PageButton>\n              ))}\n\n              <PageButton\n                onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n                disabled={currentPage === totalPages}\n              >\n                Next\n              </PageButton>\n            </Pagination>\n          )}\n        </ProductsSection>\n      </MainContent>\n\n      <Footer />\n\n      {/* Product Detail Modal - Not used, now navigates to individual product page */}\n    </ShopContainer>\n  );\n};\n\nexport default NewShopPage;"],"names":["React","useState","useEffect","useRouter","useProduct","useCart","useAuth","Header","Footer","ProductDetail","ShopContainer","ShopHero","MainContent","ProductsSection","ProductFilters","FilterSection","FilterHeader","FilterContent","FilterOption","ProductsGrid","ProductCard","ProductImage","ProductInfo","ProductPrice","Pagination","PageButton","LoadingSpinner","ErrorContainer","NewShopPage","router","products","loading","productLoading","error","productError","fetchProducts","items","cartItems","addItem","addToCart","cartCount","user","selectedProduct","setSelectedProduct","filters","setFilters","category","priceRange","sortBy","currentPage","setCurrentPage","itemsPerPage","filteredProducts","filter","product","sort","a","b","name","localeCompare","price","indexOfLastItem","indexOfFirstItem","currentItems","slice","totalPages","Math","ceil","length","categories","Set","map","p","Boolean","openProductDetail","handleFilterChange","filterType","value","prev","handleAddToCart","localStorage","setItem","JSON","stringify","quantity","window","dispatchEvent","CustomEvent","detail","id","Date","now","product_id","description","image_url","primary_image","location","reload","marginTop","display","gridTemplateColumns","gap","padding","flexDirection","height","minWidth","maxWidth","margin","push","slug","cursor","width","imageClass","flex","justifyContent","fontSize","color","alignItems","fontWeight","marginRight","toLocaleString","textDecoration","position","e","stopPropagation","zIndex","cartItem","find","item","top","right","backgroundColor","borderRadius","border","boxShadow","gridColumn","textAlign","max","Array","_","i","min"],"mappings":"","ignoreList":[],"debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/app/shop/page.tsx"],"sourcesContent":["import NewShopPage from '@/components/NewShopPage'\n\nexport default function ShopPage() {\n  return <NewShopPage />\n}"],"names":["NewShopPage","ShopPage"],"mappings":";;;;;AAAA,OAAOA,WAAW,MAAM,0BAA0B;;;AAEnC,SAASC,QAAQA,CAAA,EAAG;IACjC,qBAAO,8OAAC,4IAAW,GAAG;;;;;AACxB","ignoreList":[],"debugId":null}}]
}