{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/lib/auth/client.ts"],"sourcesContent":["// Client-side authentication utilities\nimport { User } from '@/types';\n\n// Sign in with Google OAuth - redirect to Google OAuth\nexport const signInWithGoogle = async () => {\n  // Use NEXT_PUBLIC_APP_URL if set, otherwise fall back to window.location.origin\n  const appUrl = process.env.NEXT_PUBLIC_APP_URL || window.location.origin;\n  const redirectUri = `${appUrl}/auth/callback`;\n  const googleClientId = process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID;\n\n  const googleAuthUrl = new URL('https://accounts.google.com/o/oauth2/v2/auth');\n  googleAuthUrl.searchParams.set('client_id', googleClientId!);\n  googleAuthUrl.searchParams.set('redirect_uri', redirectUri);\n  googleAuthUrl.searchParams.set('response_type', 'code');\n  googleAuthUrl.searchParams.set('scope', 'openid email profile');\n  googleAuthUrl.searchParams.set('access_type', 'offline');\n  googleAuthUrl.searchParams.set('prompt', 'consent');\n\n  window.location.href = googleAuthUrl.toString();\n};\n\n// Sign out\nexport const signOut = async () => {\n  try {\n    const response = await fetch('/api/auth/logout', {\n      method: 'POST',\n      credentials: 'include',\n    });\n\n    if (!response.ok) {\n      throw new Error('Logout failed');\n    }\n\n    return { success: true };\n  } catch (error) {\n    console.error('Error signing out:', error);\n    throw error;\n  }\n};\n\n// Get current session/user\nexport const getCurrentSession = async (): Promise<{ user: User | null }> => {\n  try {\n    const response = await fetch('/api/auth/session', {\n      credentials: 'include',\n    });\n\n    if (!response.ok) {\n      return { user: null };\n    }\n\n    const data = await response.json();\n    return { user: data.user || null };\n  } catch (error) {\n    console.error('Error getting session:', error);\n    return { user: null };\n  }\n};\n\n// Get current user\nexport const getCurrentUser = async (): Promise<User | null> => {\n  const { user } = await getCurrentSession();\n  return user;\n};\n\n// Get user profile (with role information)\nexport const getUserProfile = async (): Promise<{ id: string; role: string } | null> => {\n  const user = await getCurrentUser();\n  if (!user) return null;\n\n  return {\n    id: String(user.id),\n    role: user.role,\n  };\n};\n\n// Update user role (admin only)\nexport const updateUserRole = async (userId: string, newRole: 'customer' | 'moderator' | 'admin') => {\n  const response = await fetch('/api/admin/update-role', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    credentials: 'include',\n    body: JSON.stringify({ userId, newRole }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to update user role');\n  }\n\n  return response.json();\n};\n\n// Get all user profiles (admin only)\nexport const getAllUserProfiles = async () => {\n  const response = await fetch('/api/admin/users', {\n    credentials: 'include',\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch user profiles');\n  }\n\n  const data = await response.json();\n  return data.users || [];\n};\n\n// Listen for auth changes (polling-based since we don't have real-time subscriptions)\nexport const onAuthStateChange = (callback: (event: string, session: { user: User | null }) => void) => {\n  let currentUser: User | null = null;\n\n  const checkAuthState = async () => {\n    const { user } = await getCurrentSession();\n\n    if (user && !currentUser) {\n      currentUser = user;\n      callback('SIGNED_IN', { user });\n    } else if (!user && currentUser) {\n      currentUser = null;\n      callback('SIGNED_OUT', { user: null });\n    } else if (user && currentUser && user.id !== currentUser.id) {\n      currentUser = user;\n      callback('USER_UPDATED', { user });\n    }\n  };\n\n  // Check immediately\n  checkAuthState();\n\n  // Poll every 2 seconds for faster cart sync after login\n  const interval = setInterval(checkAuthState, 2000);\n\n  return {\n    unsubscribe: () => {\n      clearInterval(interval);\n    },\n  };\n};\n"],"names":["User","signInWithGoogle","appUrl","process","env","NEXT_PUBLIC_APP_URL","window","location","origin","redirectUri","googleClientId","NEXT_PUBLIC_GOOGLE_CLIENT_ID","googleAuthUrl","URL","searchParams","set","href","toString","signOut","response","fetch","method","credentials","ok","Error","success","error","console","getCurrentSession","Promise","user","data","json","getCurrentUser","getUserProfile","id","role","String","updateUserRole","userId","newRole","headers","body","JSON","stringify","getAllUserProfiles","users","onAuthStateChange","callback","event","session","currentUser","checkAuthState","interval","setInterval","unsubscribe","clearInterval"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useReducer, useCallback, useEffect } from 'react';\nimport { User } from '@/types';\nimport { signInWithGoogle as googleSignIn, signOut, onAuthStateChange, getCurrentUser, getUserProfile } from '@/lib/auth/client';\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  loading: boolean;\n  error: string | null;\n}\n\ntype AuthAction =\n  | { type: 'SET_USER'; payload: User | null }\n  | { type: 'SET_TOKEN'; payload: string | null }\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_ERROR'; payload: string | null }\n  | { type: 'LOGOUT' };\n\nconst initialState: AuthState = {\n  user: null,\n  token: null,\n  loading: false,\n  error: null,\n};\n\nfunction authReducer(state: AuthState, action: AuthAction): AuthState {\n  switch (action.type) {\n    case 'SET_USER': return { ...state, user: action.payload };\n    case 'SET_TOKEN': return { ...state, token: action.payload };\n    case 'SET_LOADING': return { ...state, loading: action.payload };\n    case 'SET_ERROR': return { ...state, error: action.payload };\n    case 'LOGOUT': return { ...state, user: null, token: null };\n    default: return state;\n  }\n}\n\nexport const AuthContext = createContext<any>(undefined);\n\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Memoized setters\n  const setUser = useCallback((u: User | null) => dispatch({ type: 'SET_USER', payload: u }), []);\n  const setToken = useCallback((t: string | null) => dispatch({ type: 'SET_TOKEN', payload: t }), []);\n  const setLoading = useCallback((l: boolean) => dispatch({ type: 'SET_LOADING', payload: l }), []);\n  const setError = useCallback((e: string | null) => dispatch({ type: 'SET_ERROR', payload: e }), []);\n\n  // Clean Logout\n  const logout = useCallback(async () => {\n    dispatch({ type: 'LOGOUT' });\n    try { await signOut(); } catch (e) {}\n  }, []);\n\n  // Google Login\n  const signInWithGoogle = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      await googleSignIn();\n    } catch (err: any) {\n      setError(err?.message || 'Google sign-in failed');\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  }, [setLoading, setError]);\n\n  // ðŸ”¥ Stable auth listener with initial session check\n  useEffect(() => {\n    console.log('AuthContext: Setting up auth state change listener');\n\n    // Check current session on mount - run immediately without delay\n    const checkCurrentSession = async () => {\n      console.log('AuthContext: Checking current session on mount...');\n\n      try {\n        const user = await getCurrentUser();\n        console.log('AuthContext: getCurrentUser result:', user);\n        if (user) {\n          console.log('AuthContext: Current user found on mount:', user);\n          setUser(user);\n\n          // Load user's cart from server IMMEDIATELY\n          try {\n            const { useCartStore } = await import('@/store/cartStore');\n            console.log('AuthContext: Loading cart from server...');\n            await useCartStore.getState().loadServerCart();\n            console.log('AuthContext: âœ… Cart loaded from server successfully');\n          } catch (cartError) {\n            console.error('AuthContext: âŒ Error loading cart:', cartError);\n          }\n        } else {\n          console.log('AuthContext: No current user found on mount');\n        }\n      } catch (error) {\n        console.error('AuthContext: Error checking current session:', error);\n      }\n    };\n\n    // Run immediately - don't delay with setTimeout\n    checkCurrentSession();\n\n    console.log('AuthContext: Subscribing to auth state changes...');\n    const sub = onAuthStateChange(async (event, session) => {\n      console.log('AuthContext: Auth state changed event:', event, 'Session:', session);\n\n      if (event === 'SIGNED_IN') {\n        const user = session.user;\n        if (!user) return;\n\n        console.log('AuthContext: Processing SIGNED_IN event for user:', user);\n        setUser(user);\n        setToken(null); // We use cookie-based sessions now\n\n        // Load user's cart from server after sign in\n        try {\n          const { useCartStore } = await import('@/store/cartStore');\n          console.log('AuthContext: Loading cart after sign in...');\n          await useCartStore.getState().loadServerCart();\n          console.log('AuthContext: âœ… Cart loaded from server after sign in');\n        } catch (cartError) {\n          console.error('AuthContext: âŒ Error loading cart after sign in:', cartError);\n        }\n      }\n\n      if (event === 'SIGNED_OUT') {\n        console.log('AuthContext: Processing SIGNED_OUT event');\n        dispatch({ type: 'LOGOUT' });\n\n        // Clear local cart state only (keep database cart for when user logs back in)\n        try {\n          const { useCartStore } = await import('@/store/cartStore');\n          useCartStore.setState({ items: [] });\n          console.log('AuthContext: âœ… Local cart state cleared after sign out (database cart preserved)');\n        } catch (cartError) {\n          console.error('AuthContext: âŒ Error clearing cart after sign out:', cartError);\n        }\n      }\n\n      if (event === 'USER_UPDATED') {\n        console.log('AuthContext: Processing USER_UPDATED event');\n        const user = session.user;\n        if (!user) return;\n\n        setUser(user);\n      }\n    });\n\n    // Reload cart when window regains focus (in case user logged in from another tab)\n    const handleWindowFocus = async () => {\n      console.log('AuthContext: Window focused, checking for cart updates...');\n      try {\n        const user = await getCurrentUser();\n        if (user) {\n          const { useCartStore } = await import('@/store/cartStore');\n          await useCartStore.getState().loadServerCart();\n          console.log('AuthContext: âœ… Cart reloaded on window focus');\n        }\n      } catch (error) {\n        console.error('AuthContext: âŒ Error reloading cart on focus:', error);\n      }\n    };\n\n    window.addEventListener('focus', handleWindowFocus);\n\n    return () => {\n      console.log('AuthContext: Cleaning up auth subscription');\n      window.removeEventListener('focus', handleWindowFocus);\n      sub.unsubscribe();\n    };\n  }, [setUser, setToken]);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        ...state,\n        setUser,\n        setToken,\n        setLoading,\n        setError,\n        signInWithGoogle,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const ctx = useContext(AuthContext);\n  if (!ctx) throw new Error('useAuth must be used within AuthProvider');\n  return ctx;\n};\n"],"names":["React","createContext","useContext","useReducer","useCallback","useEffect","User","signInWithGoogle","googleSignIn","signOut","onAuthStateChange","getCurrentUser","getUserProfile","AuthState","user","token","loading","error","AuthAction","type","payload","initialState","authReducer","state","action","AuthContext","undefined","AuthProvider","children","ReactNode","dispatch","setUser","u","setToken","t","setLoading","l","setError","e","logout","err","message","console","log","checkCurrentSession","useCartStore","getState","loadServerCart","cartError","sub","event","session","setState","items","handleWindowFocus","window","addEventListener","removeEventListener","unsubscribe","useAuth","ctx","Error"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/store/cartStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, subscribeWithSelector } from 'zustand/middleware';\nimport { CartItem } from '@/types';\n\ninterface CartState {\n  items: CartItem[];\n  isLoading: boolean;\n  addItem: (item: CartItem) => Promise<void>;\n  updateItem: (productId: number, quantity: number) => Promise<void>;\n  removeItem: (productId: number) => Promise<void>;\n  clearCart: () => Promise<void>;\n  syncWithServer: () => Promise<void>;\n  loadServerCart: () => Promise<void>;\n  getTotalItems: () => number;\n  getTotalPrice: () => number;\n}\n\n// Helper to check if user is authenticated\nasync function isUserAuthenticated(): Promise<boolean> {\n  try {\n    const response = await fetch('/api/auth/session');\n    const data = await response.json();\n    return data.authenticated === true;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Sync cart item with server\nasync function syncCartItemWithServer(productId: number, quantity: number) {\n  try {\n    const isAuth = await isUserAuthenticated();\n    if (!isAuth) return;\n\n    if (quantity <= 0) {\n      // Remove from server\n      await fetch(`/api/cart`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ product_id: productId, quantity: 0 }),\n      });\n    } else {\n      // Update on server\n      await fetch(`/api/cart`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ product_id: productId, quantity }),\n      });\n    }\n  } catch (error) {\n    console.error('Failed to sync cart with server:', error);\n  }\n}\n\nexport const useCartStore = create<CartState>()(\n  persist(\n    subscribeWithSelector((set, get) => ({\n      items: [],\n      isLoading: false,\n\n      addItem: async (item) => {\n        // Add to local state first for immediate UI update\n        set((state) => {\n          const existingItemIndex = state.items.findIndex(\n            cartItem => cartItem.product_id === item.product_id\n          );\n\n          if (existingItemIndex >= 0) {\n            const updatedItems = [...state.items];\n            updatedItems[existingItemIndex] = {\n              ...updatedItems[existingItemIndex],\n              quantity: updatedItems[existingItemIndex].quantity + item.quantity\n            };\n            return { items: updatedItems };\n          } else {\n            return { items: [...state.items, item] };\n          }\n        });\n\n        // Sync with server\n        try {\n          const isAuth = await isUserAuthenticated();\n\n          if (isAuth) {\n            const response = await fetch('/api/cart', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                product_id: item.product_id,\n                quantity: item.quantity,\n              }),\n            });\n\n            const result = await response.json();\n\n            if (!response.ok) {\n              console.error('Failed to save cart item to server:', result);\n            }\n          }\n        } catch (error) {\n          console.error('Failed to sync cart with server:', error);\n        }\n      },\n\n      updateItem: async (productId, quantity) => {\n        // Update local state first\n        set((state) => {\n          if (quantity <= 0) {\n            return { items: state.items.filter(item => item.product_id !== productId) };\n          }\n\n          const updatedItems = state.items.map(item =>\n            item.product_id === productId ? { ...item, quantity } : item\n          );\n\n          return { items: updatedItems };\n        });\n\n        // Sync with server\n        await syncCartItemWithServer(productId, quantity);\n      },\n\n      removeItem: async (productId) => {\n        // Remove from local state first\n        set((state) => ({\n          items: state.items.filter(item => item.product_id !== productId)\n        }));\n\n        // Sync with server\n        await syncCartItemWithServer(productId, 0);\n      },\n\n      clearCart: async () => {\n        set({ items: [] });\n\n        // Clear server cart\n        try {\n          const isAuth = await isUserAuthenticated();\n          if (isAuth) {\n            await fetch('/api/cart', { method: 'DELETE' });\n          }\n        } catch (error) {\n          console.error('Failed to clear server cart:', error);\n        }\n      },\n\n      // Load cart from server (called on login)\n      loadServerCart: async () => {\n        try {\n          set({ isLoading: true });\n          const response = await fetch('/api/cart');\n          const data = await response.json();\n\n          if (data.success && data.data) {\n            // Merge server cart with local cart\n            const serverItems = data.data;\n            const localItems = get().items;\n\n            // Create a map of server items by product_id\n            const serverItemsMap = new Map(\n              serverItems.map((item: CartItem) => [item.product_id, item])\n            );\n\n            // Merge: server items take priority, but keep local items not in server\n            const mergedItems: CartItem[] = [];\n\n            // Add all server items\n            serverItems.forEach((serverItem: CartItem) => {\n              const localItem = localItems.find(\n                item => item.product_id === serverItem.product_id\n              );\n\n              // If item exists locally, take the higher quantity\n              if (localItem && localItem.quantity > serverItem.quantity) {\n                mergedItems.push({\n                  ...serverItem,\n                  quantity: localItem.quantity\n                });\n\n                // Sync the higher quantity back to server\n                if (serverItem.product_id && localItem.quantity) {\n                  syncCartItemWithServer(serverItem.product_id, localItem.quantity);\n                }\n              } else {\n                mergedItems.push(serverItem);\n              }\n            });\n\n            // Add local items that aren't on server\n            for (const localItem of localItems) {\n              if (!serverItemsMap.has(localItem.product_id)) {\n                mergedItems.push(localItem);\n\n                // Sync new local item to server\n                fetch('/api/cart', {\n                  method: 'POST',\n                  headers: { 'Content-Type': 'application/json' },\n                  body: JSON.stringify({\n                    product_id: localItem.product_id,\n                    quantity: localItem.quantity,\n                  }),\n                }).catch(err => console.error('Failed to sync local item:', err));\n              }\n            }\n\n            set({ items: mergedItems, isLoading: false });\n          } else {\n            set({ isLoading: false });\n          }\n        } catch (error) {\n          console.error('Failed to load server cart:', error);\n          set({ isLoading: false });\n        }\n      },\n\n      // Force sync current cart to server\n      syncWithServer: async () => {\n        try {\n          const isAuth = await isUserAuthenticated();\n          if (!isAuth) return;\n\n          const items = get().items;\n\n          // Sync each item to server\n          for (const item of items) {\n            await fetch('/api/cart', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({\n                product_id: item.product_id,\n                quantity: item.quantity,\n              }),\n            });\n          }\n        } catch (error) {\n          console.error('Failed to sync cart with server:', error);\n        }\n      },\n\n      getTotalItems: () => {\n        const state = get();\n        return state.items.reduce((total, item) => total + item.quantity, 0);\n      },\n\n      getTotalPrice: () => {\n        const state = get();\n        return state.items.reduce((total, item) => total + (item.price as number * item.quantity), 0);\n      }\n    })),\n    {\n      name: 'cart-storage',\n      partialize: (state) => ({ items: state.items }),\n    }\n  )\n);"],"names":["create","persist","subscribeWithSelector","CartItem","CartState","items","isLoading","addItem","item","Promise","updateItem","productId","quantity","removeItem","clearCart","syncWithServer","loadServerCart","getTotalItems","getTotalPrice","isUserAuthenticated","response","fetch","data","json","authenticated","error","syncCartItemWithServer","isAuth","method","headers","body","JSON","stringify","product_id","console","useCartStore","set","get","state","existingItemIndex","findIndex","cartItem","updatedItems","result","ok","filter","map","success","serverItems","localItems","serverItemsMap","Map","mergedItems","forEach","serverItem","localItem","find","push","has","catch","err","reduce","total","price","name","partialize"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 632, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/context/CartContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext } from 'react';\nimport { useCartStore } from '@/store/cartStore'; // Assuming you have this Zustand store\n\n// Create context\nexport const CartContext = createContext<{\n  items: any[];\n  loading: boolean;\n  error: string | null;\n  cartCount: number;\n  cartTotal: number;\n  addItem: (item: any) => void;\n  updateItem: (productId: number, quantity: number) => void;\n  removeItem: (productId: number) => void;\n  clearCart: () => void;\n} | undefined>(undefined);\n\n// Define cart item type\ninterface CartItem {\n  id: number;\n  product_id: number;\n  quantity: number;\n  name?: string;\n  price?: number;\n  image_url?: string;\n}\n\n// Provider component\ninterface CartProviderProps {\n  children: React.ReactNode;\n}\n\nexport const CartProvider: React.FC<CartProviderProps> = ({ children }) => {\n  const { items, addItem, updateItem, removeItem, clearCart, getTotalItems, getTotalPrice } = useCartStore();\n  \n  return (\n    <CartContext.Provider\n      value={{\n        items,\n        loading: false,\n        error: null,\n        cartCount: getTotalItems(),\n        cartTotal: getTotalPrice(),\n        addItem,\n        updateItem,\n        removeItem,\n        clearCart\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};"],"names":["React","createContext","useContext","useCartStore","CartContext","items","loading","error","cartCount","cartTotal","addItem","item","updateItem","productId","quantity","removeItem","clearCart","undefined","CartItem","id","product_id","name","price","image_url","CartProviderProps","children","ReactNode","CartProvider","FC","getTotalItems","getTotalPrice","useCart","context","Error"],"mappings":";;;;;;;;;AAEA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,QAAQ,OAAO;AACxD,SAASC,YAAY,QAAQ,mBAAmB,CAAC,mKAAC,uCAAA;AAHlD,YAAY;;;;AAML,MAAMC,WAAW,qBAAGH,sNAAa,CAAC,CAU1BgB,SAAS,CAAC;AAiBlB,MAAMU,YAAY,EAAE3B,CAA8B2B,CAAC,EAAEF,CAA5B,CAACG,EAAE,CAACJ,GAAwBC,EAAU,KAAK,OAAtB,CAAC;IACpD,MAAM,EAAEpB,KAAK,EAAEK,OAAO,EAAEE,UAAU,EAAEG,UAAU,EAAEC,SAAS,EAAEa,aAAa,EAAEC,aAAAA,EAAe,OAAG3B,yIAAY,CAAC,CAAC;IAE1G,qBACE,8OAAC,WAAW,CAAC,QAAQ;QACnB,KAAK,CAAC,CAAC;YACLE,KAAK;YACLC,OAAO,EAAE,KAAK;YACdC,KAAK,EAAE,IAAI;YACXC,SAAS,EAAEqB,aAAa,CAAC,CAAC;YAC1BpB,SAAS,EAAEqB,aAAa,CAAC,CAAC;YAC1BpB,OAAO;YACPE,UAAU;YACVG,UAAU;YACVC;QACF,CAAC,CAAC;kBAEDS,QAAQ;;;;;;AAGf,CAAC;AAEM,MAAMM,OAAO,GAAGA,CAAA,KAAM;IAC3B,MAAMC,OAAO,OAAG9B,mNAAU,EAACE,WAAW,CAAC;IACvC,IAAI4B,OAAO,KAAKf,SAAS,EAAE;QACzB,MAAM,IAAIgB,KAAK,CAAC,4CAA4C,CAAC;IAC/D;IACA,OAAOD,OAAO;AAChB,CAAC","ignoreList":[],"debugId":null}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/lib/api.ts"],"sourcesContent":["// API utility functions for making requests to our Next.js API routes\nimport { CartItem, Order } from '@/types';\n\ninterface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  message?: string;\n  error?: string;\n}\n\nclass ApiClient {\n  private baseUrl: string;\n  private token: string | null;\n\n  constructor() {\n    this.baseUrl = typeof window !== 'undefined' ? '' : process.env.API_BASE_URL || '';\n    // Initialize token from localStorage in the browser\n    if (typeof window !== 'undefined') {\n      this.token = localStorage.getItem('token');\n    } else {\n      this.token = null;\n    }\n  }\n\n  setToken(token: string | null) {\n    this.token = token;\n    if (typeof window !== 'undefined' && token) {\n      localStorage.setItem('token', token);\n    } else if (typeof window !== 'undefined') {\n      localStorage.removeItem('token');\n    }\n  }\n\n  private async request<T>(endpoint: string, options: RequestInit = {}): Promise<ApiResponse<T>> {\n    const url = `${this.baseUrl}/api${endpoint}`;\n    \n    const headers = {\n      'Content-Type': 'application/json',\n      ...(this.token && { 'Authorization': `Bearer ${this.token}` }),\n      ...options.headers,\n    };\n\n    const config: RequestInit = {\n      ...options,\n      headers,\n      // Include credentials for authentication\n      credentials: 'include',\n    };\n\n    try {\n      const response = await fetch(url, config);\n      const data = await response.json();\n\n      return data;\n    } catch (error) {\n      console.error(`API request error to ${url}:`, error);\n      return {\n        success: false,\n        error: 'Network error or server unavailable'\n      };\n    }\n  }\n\n\n\n  // Products\n  async getProducts() {\n    return this.request<{ id: number; name: string; description: string; price: number; image_url?: string; category?: string; }[]>('/products');\n  }\n\n  async getProduct(id: number) {\n    return this.request<{ id: number; name: string; description: string; price: number; image_url?: string; category?: string; slug?: string; }>(`/products/${id}`);\n  }\n  \n  async getProductBySlug(slug: string) {\n    return this.request<{ id: number; name: string; description: string; price: number; image_url?: string; category?: string; slug?: string; }>(`/products/${slug}`);\n  }\n\n  async createProduct(productData: { name: string; description: string; price: number; image_url?: string; image_urls?: string[]; category?: string }) {\n    return this.request<{ id: number; name: string; description: string; price: number; image_url?: string; images?: string[]; category?: string }>('/products', {\n      method: 'POST',\n      body: JSON.stringify(productData),\n    });\n  }\n\n  async updateProduct(id: number, productData: { name: string; description: string; price: number; image_url?: string; image_urls?: string[]; category?: string }) {\n    return this.request<{ id: number; name: string; description: string; price: number; image_url?: string; images?: string[]; category?: string }>(`/products/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(productData),\n    });\n  }\n\n  async deleteProduct(id: number) {\n    return this.request<void>(`/products/${id}`, {\n      method: 'DELETE',\n    });\n  }\n\n  // Search\n  async searchProducts(params: {\n    q?: string;\n    search?: string;\n    category?: string;\n    minPrice?: number;\n    maxPrice?: number;\n    page?: number;\n    limit?: number;\n  }) {\n    const searchParams = new URLSearchParams();\n    \n    if (params.q) searchParams.append('q', params.q);\n    if (params.search) searchParams.append('search', params.search);\n    if (params.category) searchParams.append('category', params.category);\n    if (params.minPrice !== undefined) searchParams.append('minPrice', params.minPrice.toString());\n    if (params.maxPrice !== undefined) searchParams.append('maxPrice', params.maxPrice.toString());\n    if (params.page) searchParams.append('page', params.page.toString());\n    if (params.limit) searchParams.append('limit', params.limit.toString());\n\n    const queryString = searchParams.toString();\n    const endpoint = queryString ? `/search/products?${queryString}` : '/search/products';\n\n    return this.request<{\n      products: any[];\n      pagination: {\n        page: number;\n        limit: number;\n        total: number;\n        pages: number;\n        hasMore: boolean;\n      };\n      filters: {\n        search: string;\n        category: string;\n        minPrice: number | null;\n        maxPrice: number | null;\n      };\n    }>(endpoint);\n  }\n\n  // Cart\n  async getCartItems() {\n    return this.request<CartItem[]>('/cart');\n  }\n\n  async addToCart(product_id: number, quantity: number = 1) {\n    const headers: any = {\n      'Content-Type': 'application/json',\n    };\n    \n    // Only add authorization header if token exists\n    if (this.token) {\n      headers.Authorization = `Bearer ${this.token}`;\n    }\n    \n    return this.request<CartItem>('/cart', {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({ product_id, quantity }),\n    });\n  }\n\n  async updateCartItem(product_id: number, quantity: number) {\n    return this.request<CartItem>('/cart', {\n      method: 'PUT',\n      body: JSON.stringify({ product_id, quantity }),\n    });\n  }\n\n  async removeFromCart(product_id: number) {\n    // Instead of DELETE, send PUT request with quantity 0 to remove specific item\n    return this.request<{ message: string }>('/cart', {\n      method: 'PUT',\n      body: JSON.stringify({ product_id, quantity: 0 }),\n    });\n  }\n\n  async clearCart() {\n    return this.request<{ message: string }>('/cart', {\n      method: 'DELETE',\n    });\n  }\n\n  // Orders\n  async getOrders() {\n    return this.request<Order[]>('/orders');\n  }\n\n  async createOrder(orderData: any) {\n    return this.request<Order>('/orders', {\n      method: 'POST',\n      body: JSON.stringify(orderData),\n    });\n  }\n\n  // Checkout\n  async createCheckoutSession(cartData: {\n    items: any[];\n    shipping_address: any;\n  }) {\n    return this.request<{\n      razorpay_order_id: string;\n      amount: number;\n      currency: string;\n      total_amount: number;\n    }>('/checkout/create', {\n      method: 'POST',\n      body: JSON.stringify(cartData),\n    });\n  }\n\n  async verifyPayment(paymentData: {\n    razorpay_order_id: string;\n    razorpay_payment_id: string;\n    razorpay_signature: string;\n  }) {\n    return this.request<{ order_id: string }>(\n      '/checkout/verify',\n      {\n        method: 'POST',\n        body: JSON.stringify(paymentData),\n      }\n    );\n  }\n\n  // Appointments\n  async getAppointments(filters?: {\n    status?: string;\n    date?: string;\n    page?: number;\n    limit?: number;\n  }) {\n    const searchParams = new URLSearchParams();\n    \n    if (filters?.status) searchParams.append('status', filters.status);\n    if (filters?.date) searchParams.append('date', filters.date);\n    if (filters?.page) searchParams.append('page', filters.page.toString());\n    if (filters?.limit) searchParams.append('limit', filters.limit.toString());\n\n    const queryString = searchParams.toString();\n    const endpoint = queryString ? `/appointments?${queryString}` : '/appointments';\n\n    return this.request<{\n      appointments: any[];\n      pagination: {\n        page: number;\n        limit: number;\n        total: number;\n        pages: number;\n        hasMore: boolean;\n      };\n    }>(endpoint);\n  }\n\n  async createAppointment(appointmentData: {\n    appointment_date: string;\n    notes?: string;\n  }) {\n    return this.request<any>('/appointments', {\n      method: 'POST',\n      body: JSON.stringify(appointmentData),\n    });\n  }\n\n  async getAppointment(id: string) {\n    return this.request<any>(`/appointments/${id}`);\n  }\n\n  async updateAppointment(id: string, updateData: {\n    status?: string;\n    notes?: string;\n  }) {\n    return this.request<any>(`/appointments/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updateData),\n    });\n  }\n\n  async deleteAppointment(id: string) {\n    return this.request<{ message: string }>(`/appointments/${id}`, {\n      method: 'DELETE',\n    });\n  }\n}\n\nexport const apiClient = new ApiClient();\n\n// Export types\nexport type { ApiResponse };"],"names":["CartItem","Order","ApiResponse","success","data","T","message","error","ApiClient","baseUrl","token","constructor","window","process","env","API_BASE_URL","localStorage","getItem","setToken","setItem","removeItem","request","endpoint","options","RequestInit","Promise","url","headers","config","credentials","response","fetch","json","console","getProducts","id","name","description","price","image_url","category","getProduct","slug","getProductBySlug","createProduct","productData","image_urls","images","method","body","JSON","stringify","updateProduct","deleteProduct","searchProducts","params","q","search","minPrice","maxPrice","page","limit","searchParams","URLSearchParams","append","undefined","toString","queryString","products","pagination","total","pages","hasMore","filters","getCartItems","addToCart","product_id","quantity","Authorization","updateCartItem","removeFromCart","clearCart","getOrders","createOrder","orderData","createCheckoutSession","cartData","items","shipping_address","razorpay_order_id","amount","currency","total_amount","verifyPayment","paymentData","razorpay_payment_id","razorpay_signature","order_id","getAppointments","status","date","appointments","createAppointment","appointmentData","appointment_date","notes","getAppointment","updateAppointment","updateData","deleteAppointment","apiClient"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 877, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/context/ProductContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useReducer, useCallback } from 'react';\nimport { apiClient } from '@/lib/api';\n\ninterface ProductState {\n  products: any[];\n  loading: boolean;\n  error: string | null;\n  appointments: any[];\n  orders: any[];\n}\n\ninterface ProductAction {\n  type: string;\n  payload?: any;\n}\n\n// Action types\nconst PRODUCT_ACTIONS = {\n  SET_PRODUCTS: 'SET_PRODUCTS',\n  SET_LOADING: 'SET_LOADING',\n  SET_ERROR: 'SET_ERROR',\n  SET_APPOINTMENTS: 'SET_APPOINTMENTS',\n  SET_ORDERS: 'SET_ORDERS',\n  ADD_ORDER: 'ADD_ORDER'\n};\n\n// Initial state\nconst initialState: ProductState = {\n  products: [],\n  loading: false,\n  error: null,\n  appointments: [],\n  orders: []\n};\n\n// Reducer\nconst productReducer = (state: ProductState, action: ProductAction): ProductState => {\n  switch (action.type) {\n    case PRODUCT_ACTIONS.SET_PRODUCTS:\n      return {\n        ...state,\n        products: Array.isArray(action.payload) ? action.payload : []\n      };\n    case PRODUCT_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case PRODUCT_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: action.payload\n      };\n    case PRODUCT_ACTIONS.SET_APPOINTMENTS:\n      return {\n        ...state,\n        appointments: Array.isArray(action.payload) ? action.payload : []\n      };\n    case PRODUCT_ACTIONS.SET_ORDERS:\n      return {\n        ...state,\n        orders: Array.isArray(action.payload) ? action.payload : []\n      };\n    case PRODUCT_ACTIONS.ADD_ORDER:\n      return {\n        ...state,\n        orders: [action.payload, ...state.orders]\n      };\n    default:\n      return state;\n  }\n};\n\n// Create context\nexport const ProductContext = createContext<{\n  products: any[];\n  loading: boolean;\n  error: string | null;\n  appointments: any[];\n  orders: any[];\n  setProducts: (products: any[]) => void;\n  setLoading: (loading: boolean) => void;\n  setError: (error: string | null) => void;\n  setAppointments: (appointments: any[]) => void;\n  setOrders: (orders: any[]) => void;\n  fetchProducts: () => Promise<void>;\n  fetchOrders: () => Promise<void>;\n  fetchAppointments: () => Promise<void>;\n  createOrder: (orderData: any) => Promise<any>;\n  createAppointment: (appointmentData: any) => Promise<any>;\n  updateProduct: (id: number, data: any) => Promise<any>;\n  deleteProduct: (id: number) => Promise<any>;\n  createProduct: (productData: any) => Promise<any>;\n} | undefined>(undefined);\n\n// Provider component\ninterface ProductProviderProps {\n  children: React.ReactNode;\n}\n\nexport const ProductProvider: React.FC<ProductProviderProps> = ({ children }) => {\n  const [state, dispatch] = useReducer(productReducer, initialState);\n\n  // Actions\n  const setProducts = (products: any[]) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_PRODUCTS, payload: products });\n  };\n\n  const setLoading = (loading: boolean) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: loading });\n  };\n\n  const setError = (error: string | null) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error });\n  };\n\n  const setAppointments = (appointments: any[]) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_APPOINTMENTS, payload: appointments });\n  };\n\n  const setOrders = (orders: any[]) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_ORDERS, payload: orders });\n  };\n\n  // Fetch products\n  const fetchProducts = async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await apiClient.getProducts();\n      if (response.success && response.data) {\n        // Handle the new response structure with pagination\n        const productsData = Array.isArray(response.data) ? response.data : (response.data as any)?.products || [];\n\n        // Convert price strings to numbers for proper formatting\n        // Map mock image_url identifiers to appropriate imageClass values\n        const mapImageIdentifierToClass = (identifier: string) => {\n          if (!identifier) return 'modern';\n\n          const lowerIdentifier = identifier.toLowerCase();\n          if (lowerIdentifier.includes('modern') || lowerIdentifier.includes('coffee') || lowerIdentifier.includes('sofa')) {\n            return 'modern';\n          } else if (lowerIdentifier.includes('classic') || lowerIdentifier.includes('armchair')) {\n            return 'classic';\n          } else if (lowerIdentifier.includes('vintage') || lowerIdentifier.includes('lamp')) {\n            return 'coastal'; // Using coastal for lighting items\n          } else if (lowerIdentifier.includes('dining') || lowerIdentifier.includes('dresser')) {\n            return 'office'; // Using office for furniture items\n          } else if (lowerIdentifier.includes('wall') || lowerIdentifier.includes('art')) {\n            return 'hotel'; // Using hotel for decor items\n          } else if (lowerIdentifier.includes('rug')) {\n            return 'restaurant'; // Using restaurant for decor items\n          } else {\n            return 'modern'; // default\n          }\n        };\n\n        const formattedProducts = productsData.map((product: any) => ({\n          ...product,\n          price: typeof product.price === 'number' ? product.price : parseFloat(product.price),\n          // Only set image_url to undefined if it's not a proper URL\n          // If it looks like an actual URL (contains http), keep it\n          image_url: product.image_url && (product.image_url.startsWith('http') || product.image_url.startsWith('/'))\n            ? product.image_url\n            : undefined,\n          // Use the identifier to determine the appropriate CSS class\n          imageClass: mapImageIdentifierToClass(product.image_url) || product.imageClass || 'modern'\n        }));\n        setProducts(formattedProducts);\n      } else {\n        console.warn('No products found:', response.error);\n        // Even if no products are found, we should still set the products state\n        // and turn off loading to avoid the infinite loading state\n        setProducts([]);\n      }\n    } catch (error: any) {\n      console.error('Error fetching products:', error);\n      setError(error.message || 'Failed to load products. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch orders\n  const fetchOrders = useCallback(async () => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.getOrders();\n      if (response.success && response.data) {\n        dispatch({ type: PRODUCT_ACTIONS.SET_ORDERS, payload: Array.isArray(response.data) ? response.data : [] });\n      } else {\n        dispatch({ type: PRODUCT_ACTIONS.SET_ORDERS, payload: [] });\n      }\n    } catch (error: any) {\n      console.error('Error fetching orders:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to load orders.' });\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, []);\n\n  // Fetch appointments\n  const fetchAppointments = useCallback(async () => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.getAppointments();\n      if (response.success && response.data) {\n        dispatch({ type: PRODUCT_ACTIONS.SET_APPOINTMENTS, payload: Array.isArray(response.data) ? response.data : [] });\n      } else {\n        dispatch({ type: PRODUCT_ACTIONS.SET_APPOINTMENTS, payload: [] });\n      }\n    } catch (error: any) {\n      console.error('Error fetching appointments:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to load appointments.' });\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, []);\n\n  // Create order\n  const createOrder = useCallback(async (orderData: any) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.createOrder(orderData);\n      if (response.success && response.data) {\n        dispatch({ type: PRODUCT_ACTIONS.ADD_ORDER, payload: response.data });\n        return response.data;\n      }\n      throw new Error(response.error || 'Failed to create order');\n    } catch (error: any) {\n      console.error('Error creating order:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to create order.' });\n      throw error;\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, []);\n\n  // Create appointment\n  const createAppointment = useCallback(async (appointmentData: any) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.createAppointment(appointmentData);\n      if (response.success && response.data) {\n        dispatch({ type: PRODUCT_ACTIONS.SET_APPOINTMENTS, payload: [response.data, ...state.appointments] });\n        return response.data;\n      }\n      throw new Error(response.error || 'Failed to create appointment');\n    } catch (error: any) {\n      console.error('Error creating appointment:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to create appointment.' });\n      throw error;\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, [state.appointments]);\n\n  // Update product\n  const updateProduct = useCallback(async (id: number, data: any) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.updateProduct(id, data);\n      if (response.success && response.data) {\n        dispatch({ type: PRODUCT_ACTIONS.SET_PRODUCTS, payload: state.products.map(p => p.id === id ? response.data : p) });\n        return response.data;\n      }\n      throw new Error(response.error || 'Failed to update product');\n    } catch (error: any) {\n      console.error('Error updating product:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to update product.' });\n      throw error;\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, [state.products]);\n\n  // Delete product\n  const deleteProduct = useCallback(async (id: number) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.deleteProduct(id);\n      if (response.success) {\n        dispatch({ type: PRODUCT_ACTIONS.SET_PRODUCTS, payload: state.products.filter(p => p.id !== id) });\n        return true;\n      }\n      throw new Error(response.error || 'Failed to delete product');\n    } catch (error: any) {\n      console.error('Error deleting product:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to delete product.' });\n      throw error;\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, [state.products]);\n\n  // Create product\n  const createProduct = useCallback(async (productData: any) => {\n    dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: true });\n    dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: null });\n    try {\n      const response = await apiClient.createProduct(productData);\n      if (response.success && response.data) {\n        dispatch({ type: PRODUCT_ACTIONS.SET_PRODUCTS, payload: [response.data, ...state.products] });\n        return response.data;\n      }\n      throw new Error(response.error || 'Failed to create product');\n    } catch (error: any) {\n      console.error('Error creating product:', error);\n      dispatch({ type: PRODUCT_ACTIONS.SET_ERROR, payload: error.message || 'Failed to create product.' });\n      throw error;\n    } finally {\n      dispatch({ type: PRODUCT_ACTIONS.SET_LOADING, payload: false });\n    }\n  }, [state.products]);\n\n  return (\n    <ProductContext.Provider\n      value={{\n        products: state.products,\n        loading: state.loading,\n        error: state.error,\n        appointments: state.appointments,\n        orders: state.orders,\n        setProducts,\n        setLoading,\n        setError,\n        setAppointments,\n        setOrders,\n        fetchProducts,\n        fetchOrders,\n        fetchAppointments,\n        createOrder,\n        createAppointment,\n        updateProduct,\n        deleteProduct,\n        createProduct\n      }}\n    >\n      {children}\n    </ProductContext.Provider>\n  );\n};\n\nexport const useProduct = () => {\n  const context = useContext(ProductContext);\n  if (context === undefined) {\n    throw new Error('useProduct must be used within a ProductProvider');\n  }\n  return context;\n};"],"names":["React","createContext","useContext","useReducer","useCallback","apiClient","ProductState","products","loading","error","appointments","orders","ProductAction","type","payload","PRODUCT_ACTIONS","SET_PRODUCTS","SET_LOADING","SET_ERROR","SET_APPOINTMENTS","SET_ORDERS","ADD_ORDER","initialState","productReducer","state","action","Array","isArray","ProductContext","setProducts","setLoading","setError","setAppointments","setOrders","fetchProducts","Promise","fetchOrders","fetchAppointments","createOrder","orderData","createAppointment","appointmentData","updateProduct","id","data","deleteProduct","createProduct","productData","undefined","ProductProviderProps","children","ReactNode","ProductProvider","FC","dispatch","response","getProducts","success","productsData","mapImageIdentifierToClass","identifier","lowerIdentifier","toLowerCase","includes","formattedProducts","map","product","price","parseFloat","image_url","startsWith","imageClass","console","warn","message","getOrders","getAppointments","Error","p","filter","useProduct","context"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1331, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/context/UIContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useReducer } from 'react';\n\ninterface LoadingState {\n  products: boolean;\n  cart: boolean;\n  orders: boolean;\n  appointments: boolean;\n  auth: boolean;\n  user: boolean;\n}\n\ninterface ErrorState {\n  products: string | null;\n  cart: string | null;\n  orders: string | null;\n  appointments: string | null;\n  auth: string | null;\n  user: string | null;\n}\n\ninterface UIState {\n  loading: LoadingState;\n  error: ErrorState;\n}\n\ninterface UIAction {\n  type: string;\n  payload?: any;\n}\n\n// Action types\nconst UI_ACTIONS = {\n  SET_LOADING: 'SET_LOADING',\n  SET_ERROR: 'SET_ERROR',\n  CLEAR_ERROR: 'CLEAR_ERROR'\n};\n\n// Initial state\nconst initialState: UIState = {\n  loading: {\n    products: false,\n    cart: false,\n    orders: false,\n    appointments: false,\n    auth: false,\n    user: false\n  },\n  error: {\n    products: null,\n    cart: null,\n    orders: null,\n    appointments: null,\n    auth: null,\n    user: null\n  }\n};\n\n// Reducer\nconst uiReducer = (state: UIState, action: UIAction): UIState => {\n  switch (action.type) {\n    case UI_ACTIONS.SET_LOADING:\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [action.payload.type]: action.payload.value\n        }\n      };\n    case UI_ACTIONS.SET_ERROR:\n      return {\n        ...state,\n        error: {\n          ...state.error,\n          [action.payload.type]: action.payload.value\n        }\n      };\n    case UI_ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: {\n          ...state.error,\n          [action.payload.type]: null\n        }\n      };\n    default:\n      return state;\n  }\n};\n\n// Create context\nexport const UIContext = createContext<{\n  loading: LoadingState;\n  error: ErrorState;\n  setLoading: (type: keyof LoadingState, value: boolean) => void;\n  setError: (type: keyof ErrorState, value: string | null) => void;\n  clearError: (type: keyof ErrorState) => void;\n} | undefined>(undefined);\n\n// Provider component\ninterface UIProviderProps {\n  children: React.ReactNode;\n}\n\nexport const UIProvider: React.FC<UIProviderProps> = ({ children }) => {\n  const [state, dispatch] = useReducer(uiReducer, initialState);\n\n  const setLoading = (type: keyof LoadingState, value: boolean) => {\n    dispatch({ type: UI_ACTIONS.SET_LOADING, payload: { type, value } });\n  };\n\n  const setError = (type: keyof ErrorState, value: string | null) => {\n    dispatch({ type: UI_ACTIONS.SET_ERROR, payload: { type, value } });\n  };\n\n  const clearError = (type: keyof ErrorState) => {\n    dispatch({ type: UI_ACTIONS.CLEAR_ERROR, payload: { type } });\n  };\n\n  return (\n    <UIContext.Provider\n      value={{\n        loading: state.loading,\n        error: state.error,\n        setLoading,\n        setError,\n        clearError\n      }}\n    >\n      {children}\n    </UIContext.Provider>\n  );\n};\n\nexport const useUI = () => {\n  const context = useContext(UIContext);\n  if (context === undefined) {\n    throw new Error('useUI must be used within a UIProvider');\n  }\n  return context;\n};"],"names":["React","createContext","useContext","useReducer","LoadingState","products","cart","orders","appointments","auth","user","ErrorState","UIState","loading","error","UIAction","type","payload","UI_ACTIONS","SET_LOADING","SET_ERROR","CLEAR_ERROR","initialState","uiReducer","state","action","value","UIContext","setLoading","setError","clearError","undefined","UIProviderProps","children","ReactNode","UIProvider","FC","dispatch","useUI","context","Error"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1455, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/context/AppProvider.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { AuthProvider } from './AuthContext';\nimport { CartProvider } from './CartContext';\nimport { ProductProvider } from './ProductContext';\nimport { UIProvider } from './UIContext';\n\n// Main provider that composes all individual context providers\nexport const AppProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  return (\n    <UIProvider>\n      <AuthProvider>\n        <ProductProvider>\n          <CartProvider>\n            {children}\n          </CartProvider>\n        </ProductProvider>\n      </AuthProvider>\n    </UIProvider>\n  );\n};"],"names":["React","AuthProvider","CartProvider","ProductProvider","UIProvider","AppProvider","FC","children","ReactNode"],"mappings":";;;;;AAGA,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,eAAe,QAAQ,kBAAkB;AAClD,SAASC,UAAU,QAAQ,aAAa;AANxC,YAAY;;;;;;AASL,MAAMC,WAAW,EAAEL,CAA0CK,CAAC,EAAEE,CAAxC,CAACD,EAAE,CAAC,GAAoCC,EAAU,KAAK;IACpF,qBACE,8OAAC,0IAAU;gCACT,8OAAC,8IAAY;oCACX,8OAAC,oJAAe;wCACd,8OAAC,8IAAY;8BACVA,QAAQ;;;;;;;;;;;;;;;;;;;;;AAMrB,CAAC","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1501, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1520, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1525, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1530, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/node_modules/zustand/esm/vanilla.mjs"],"sourcesContent":["const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n"],"names":[],"mappings":";;;;AAAA,MAAM,kBAAkB,CAAC;IACvB,IAAI;IACJ,MAAM,YAAY,aAAa,GAAG,IAAI;IACtC,MAAM,WAAW,CAAC,SAAS;QACzB,MAAM,YAAY,OAAO,YAAY,aAAa,QAAQ,SAAS;QACnE,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,QAAQ;YAChC,MAAM,gBAAgB;YACtB,QAAQ,CAAC,WAAW,OAAO,UAAU,OAAO,cAAc,YAAY,cAAc,IAAI,IAAI,YAAY,OAAO,MAAM,CAAC,CAAC,GAAG,OAAO;YACjI,UAAU,OAAO,CAAC,CAAC,WAAa,SAAS,OAAO;QAClD;IACF;IACA,MAAM,WAAW,IAAM;IACvB,MAAM,kBAAkB,IAAM;IAC9B,MAAM,YAAY,CAAC;QACjB,UAAU,GAAG,CAAC;QACd,OAAO,IAAM,UAAU,MAAM,CAAC;IAChC;IACA,MAAM,MAAM;QAAE;QAAU;QAAU;QAAiB;IAAU;IAC7D,MAAM,eAAe,QAAQ,YAAY,UAAU,UAAU;IAC7D,OAAO;AACT;AACA,MAAM,cAAe,CAAC,cAAgB,cAAc,gBAAgB,eAAe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1566, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/node_modules/zustand/esm/react.mjs"],"sourcesContent":["import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,CAAC,MAAQ;AAC1B,SAAS,SAAS,GAAG,EAAE,WAAW,QAAQ;IACxC,MAAM,QAAQ,gNAAK,CAAC,oBAAoB,CACtC,IAAI,SAAS,EACb,gNAAK,CAAC,WAAW,CAAC,IAAM,SAAS,IAAI,QAAQ,KAAK;QAAC;QAAK;KAAS,GACjE,gNAAK,CAAC,WAAW,CAAC,IAAM,SAAS,IAAI,eAAe,KAAK;QAAC;QAAK;KAAS;IAE1E,gNAAK,CAAC,aAAa,CAAC;IACpB,OAAO;AACT;AACA,MAAM,aAAa,CAAC;IAClB,MAAM,MAAM,IAAA,yJAAW,EAAC;IACxB,MAAM,gBAAgB,CAAC,WAAa,SAAS,KAAK;IAClD,OAAO,MAAM,CAAC,eAAe;IAC7B,OAAO;AACT;AACA,MAAM,SAAU,CAAC,cAAgB,cAAc,WAAW,eAAe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1600, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/node_modules/zustand/esm/middleware.mjs"],"sourcesContent":["const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}