{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/app/booking/page.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/booking/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/booking/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/app/booking/page.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/booking/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/booking/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwQ,GACrS,sCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/sk/personal/proj/cms/src/app/booking/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from '@/context/AppContext';\nimport Header from '@/components/Header';\nimport Footer from '@/components/Footer';\nimport { useRouter } from 'next/navigation';\nimport {\n  ConsultationContainer,\n  ConsultationHero,\n  BenefitsSection,\n  BenefitsGrid,\n  BenefitCard,\n  BookingSection,\n  BookingCard,\n  BookingHeader,\n  BookingForm,\n  FormGroup,\n  TimeSlotGrid,\n  TimeSlotButton,\n  ButtonGroup,\n  Button,\n  SuccessMessage,\n  ErrorAlert,\n  LoadingSpinner,\n  TrustSection,\n  TrustStats,\n  TrustStat\n} from '@/styles/ConsultationStyles';\n\nconst BookingPage = () => {\n  const router = useRouter();\n  const { user } = useAppContext();\n\n  // Get today's date in YYYY-MM-DD format\n  const getTodayDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  const [selectedDate, setSelectedDate] = useState<string>(getTodayDate());\n  const [selectedTime, setSelectedTime] = useState<string>('');\n  const [name, setName] = useState<string>('');\n  const [email, setEmail] = useState<string>('');\n  const [phone, setPhone] = useState<string>('');\n  const [notes, setNotes] = useState<string>('');\n  const [availableSlots, setAvailableSlots] = useState<string[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<boolean>(false);\n\n  // Pre-fill user details if logged in\n  useEffect(() => {\n    if (user) {\n      setName(user.name || '');\n      setEmail(user.email || '');\n    }\n  }, [user]);\n\n  // Generate time slots on initial load\n  useEffect(() => {\n    if (selectedDate) {\n      const slots = generateTimeSlots(selectedDate);\n      setAvailableSlots(slots);\n    }\n  }, []);\n\n  // Generate available time slots for a given date\n  const generateTimeSlots = (date: string) => {\n    const slots = [];\n    const startHour = 9;\n    const endHour = 18;\n\n    for (let hour = startHour; hour < endHour; hour++) {\n      for (let minute = 0; minute < 60; minute += 30) {\n        const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n        slots.push(timeString);\n      }\n    }\n\n    return slots;\n  };\n\n  // Handle date selection and generate available time slots\n  const handleDateChange = (date: string) => {\n    setSelectedDate(date);\n    setSelectedTime('');\n    const slots = generateTimeSlots(date);\n    setAvailableSlots(slots);\n  };\n\n  // Handle booking submission\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSuccess(false);\n\n    try {\n      if (!selectedDate) {\n        throw new Error('Please select a date');\n      }\n\n      if (!name || !email || !phone) {\n        throw new Error('Please fill in all contact details');\n      }\n\n      // If time is selected, include it; otherwise just use the date with a default time\n      const appointmentDateTime = selectedTime\n        ? new Date(`${selectedDate}T${selectedTime}:00`)\n        : new Date(`${selectedDate}T09:00:00`); // Default to 9 AM if no time selected\n\n      const response = await fetch('/api/appointments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          appointment_date: appointmentDateTime.toISOString(),\n          name,\n          email,\n          phone,\n          notes: notes || '',\n          service_type: selectedTime ? `Preferred time: ${selectedTime}` : 'No time preference'\n        })\n      });\n\n      const result = await response.json();\n\n      if (!result.success) {\n        throw new Error(result.error || 'Failed to submit consultation request');\n      }\n\n      setSuccess(true);\n      // Don't clear the form or redirect - just show success message\n    } catch (err: any) {\n      console.error('Booking error:', err);\n      setError(err.message || 'An error occurred while submitting your request');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <ConsultationContainer>\n      <Header activePage=\"booking\" />\n\n      {/* Hero Section */}\n      <ConsultationHero>\n        <div className=\"hero-content\">\n          <h1>Book a Consultation</h1>\n          <p>Transform your space with expert guidance</p>\n        </div>\n      </ConsultationHero>\n\n      {/* Benefits Section */}\n      <BenefitsSection>\n        <div className=\"container\">\n          <h2>Why Book a Consultation?</h2>\n          <BenefitsGrid>\n            <BenefitCard>\n              <div className=\"icon\">\n                <i className=\"fas fa-user-check\"></i>\n              </div>\n              <h3>Expert Advice</h3>\n              <p>Get personalized recommendations from our experienced interior designers</p>\n            </BenefitCard>\n\n            <BenefitCard>\n              <div className=\"icon\">\n                <i className=\"fas fa-lightbulb\"></i>\n              </div>\n              <h3>Creative Solutions</h3>\n              <p>Discover innovative design ideas tailored to your unique style and needs</p>\n            </BenefitCard>\n\n            <BenefitCard>\n              <div className=\"icon\">\n                <i className=\"fas fa-chart-line\"></i>\n              </div>\n              <h3>Budget Planning</h3>\n              <p>Receive accurate cost estimates and timeline projections for your project</p>\n            </BenefitCard>\n\n            <BenefitCard>\n              <div className=\"icon\">\n                <i className=\"fas fa-gift\"></i>\n              </div>\n              <h3>Free Initial Session</h3>\n              <p>Your first 30-minute consultation is completely complimentary</p>\n            </BenefitCard>\n          </BenefitsGrid>\n        </div>\n      </BenefitsSection>\n\n      {/* Booking Form Section */}\n      <BookingSection>\n        <div className=\"container\">\n          <BookingCard>\n            <BookingHeader>\n              <h2>Schedule Your Consultation</h2>\n              <p>Select your preferred date and time</p>\n            </BookingHeader>\n\n            {success ? (\n              <SuccessMessage>\n                <div className=\"icon\">\n                  <i className=\"fas fa-check\"></i>\n                </div>\n                <h3>Thank You for Contacting Us!</h3>\n                <p>We have received your consultation request. Our team will review it and get back to you shortly via email or phone.</p>\n                <Button\n                  $variant=\"primary\"\n                  onClick={() => {\n                    setSuccess(false);\n                    setSelectedDate(getTodayDate());\n                    setSelectedTime('');\n                    setNotes('');\n                    if (!user) {\n                      setName('');\n                      setEmail('');\n                      setPhone('');\n                    }\n                  }}\n                >\n                  Submit Another Request\n                </Button>\n              </SuccessMessage>\n            ) : (\n              <BookingForm onSubmit={handleSubmit}>\n                {error && <ErrorAlert>{error}</ErrorAlert>}\n\n                {/* Contact Information */}\n                <FormGroup>\n                  <label htmlFor=\"name\">Full Name *</label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    value={name}\n                    onChange={(e) => setName(e.target.value)}\n                    required\n                    placeholder=\"John Doe\"\n                  />\n                </FormGroup>\n\n                <FormGroup>\n                  <label htmlFor=\"email\">Email Address *</label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                    placeholder=\"john@example.com\"\n                  />\n                </FormGroup>\n\n                <FormGroup>\n                  <label htmlFor=\"phone\">Phone Number *</label>\n                  <input\n                    type=\"tel\"\n                    id=\"phone\"\n                    value={phone}\n                    onChange={(e) => setPhone(e.target.value)}\n                    required\n                    placeholder=\"+1 (555) 000-0000\"\n                  />\n                </FormGroup>\n\n                {/* Date Selection */}\n                <FormGroup>\n                  <label htmlFor=\"date\">Select Date *</label>\n                  <input\n                    type=\"date\"\n                    id=\"date\"\n                    value={selectedDate}\n                    min={new Date().toISOString().split('T')[0]}\n                    onChange={(e) => handleDateChange(e.target.value)}\n                    required\n                  />\n                </FormGroup>\n\n                {/* Time Slot Selection - Optional */}\n                {selectedDate && (\n                  <FormGroup>\n                    <label>Preferred Time (Optional)</label>\n                    <p style={{ fontSize: '12px', color: '#666', marginBottom: '10px' }}>\n                      Select a preferred time or leave blank and we'll contact you to schedule\n                    </p>\n                    <TimeSlotGrid>\n                      {availableSlots.map((slot, index) => (\n                        <TimeSlotButton\n                          key={index}\n                          type=\"button\"\n                          $selected={selectedTime === slot}\n                          onClick={() => setSelectedTime(selectedTime === slot ? '' : slot)}\n                        >\n                          {slot}\n                        </TimeSlotButton>\n                      ))}\n                    </TimeSlotGrid>\n                  </FormGroup>\n                )}\n\n                {/* Notes */}\n                <FormGroup>\n                  <label htmlFor=\"notes\">Additional Notes (Optional)</label>\n                  <textarea\n                    id=\"notes\"\n                    value={notes}\n                    onChange={(e) => setNotes(e.target.value)}\n                    placeholder=\"Tell us about your project, style preferences, or any specific requirements...\"\n                  />\n                </FormGroup>\n\n                {/* Submit Buttons */}\n                <ButtonGroup>\n                  <Button\n                    type=\"button\"\n                    $variant=\"secondary\"\n                    onClick={() => router.back()}\n                  >\n                    Cancel\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    $variant=\"primary\"\n                    disabled={loading || !selectedDate || !name || !email || !phone}\n                  >\n                    {loading ? 'Submitting...' : 'Request Consultation'}\n                  </Button>\n                </ButtonGroup>\n              </BookingForm>\n            )}\n          </BookingCard>\n        </div>\n      </BookingSection>\n\n      {/* Trust Section */}\n      <TrustSection>\n        <div className=\"container\">\n          <h3>Trusted by Hundreds of Happy Clients</h3>\n          <TrustStats>\n            <TrustStat>\n              <div className=\"number\">500+</div>\n              <div className=\"label\">Projects Completed</div>\n            </TrustStat>\n\n            <TrustStat>\n              <div className=\"number\">98%</div>\n              <div className=\"label\">Client Satisfaction</div>\n            </TrustStat>\n\n            <TrustStat>\n              <div className=\"number\">15+</div>\n              <div className=\"label\">Years Experience</div>\n            </TrustStat>\n\n            <TrustStat>\n              <div className=\"number\">50+</div>\n              <div className=\"label\">Design Awards</div>\n            </TrustStat>\n          </TrustStats>\n        </div>\n      </TrustSection>\n\n      <Footer />\n    </ConsultationContainer>\n  );\n};\n\nexport default BookingPage;\n"],"names":["React","useState","useEffect","useAppContext","Header","Footer","useRouter","ConsultationContainer","ConsultationHero","BenefitsSection","BenefitsGrid","BenefitCard","BookingSection","BookingCard","BookingHeader","BookingForm","FormGroup","TimeSlotGrid","TimeSlotButton","ButtonGroup","Button","SuccessMessage","ErrorAlert","LoadingSpinner","TrustSection","TrustStats","TrustStat","BookingPage","router","user","getTodayDate","today","Date","toISOString","split","selectedDate","setSelectedDate","selectedTime","setSelectedTime","name","setName","email","setEmail","phone","setPhone","notes","setNotes","availableSlots","setAvailableSlots","loading","setLoading","error","setError","success","setSuccess","slots","generateTimeSlots","date","startHour","endHour","hour","minute","timeString","toString","padStart","push","handleDateChange","handleSubmit","e","FormEvent","preventDefault","Error","appointmentDateTime","response","fetch","method","headers","credentials","body","JSON","stringify","appointment_date","service_type","result","json","err","console","message","target","value","fontSize","color","marginBottom","map","slot","index","back"],"mappings":"","ignoreList":[],"debugId":null}}]
}