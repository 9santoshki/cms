{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/santoshk/sk/codebase/newprojs/qwenproj/src/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\n\nlet pool: Pool;\n\n// Initialize the database connection pool\nif (process.env.NODE_ENV === 'production') {\n  // Production environment - use connection string\n  pool = new Pool({\n    connectionString: process.env.DATABASE_URL,\n    ssl: {\n      rejectUnauthorized: false\n    }\n  });\n} else {\n  // Development environment - use individual parameters\n  pool = new Pool({\n    user: process.env.DB_USER || 'postgres',\n    host: process.env.DB_HOST || 'localhost',\n    database: process.env.DB_NAME || 'ecommerce_db',\n    password: process.env.DB_PASSWORD || 'postgres',\n    port: parseInt(process.env.DB_PORT || '5432'),\n  });\n}\n\nexport default pool;\n\n// Test the connection\nexport const connectDB = async () => {\n  try {\n    await pool.query('SELECT NOW()');\n    console.log('Database connected successfully');\n  } catch (error) {\n    console.error('Database connection error:', error);\n    throw error;\n  }\n};"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAI;AAEJ,0CAA0C;AAC1C;;KAQO;IACL,sDAAsD;IACtD,OAAO,IAAI,4GAAI,CAAC;QACd,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;QAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;QAC7B,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;QACjC,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;QACrC,MAAM,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IACxC;AACF;uCAEe;AAGR,MAAM,YAAY;IACvB,IAAI;QACF,MAAM,KAAK,KAAK,CAAC;QACjB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///home/santoshk/sk/codebase/newprojs/qwenproj/src/app/api/products/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport db from '@/lib/db';\n\nexport async function GET(_request: NextRequest) {\n  try {\n    // Get all products\n    const query = `\n      SELECT id, name, description, price, image_url, category, created_at\n      FROM products\n      ORDER BY created_at DESC\n    `;\n    const result = await db.query(query);\n    \n    return NextResponse.json({ \n      success: true, \n      data: result.rows \n    });\n  } catch (error) {\n    console.error('Error fetching products:', error);\n    return NextResponse.json(\n      { \n        success: false, \n        error: 'Internal server error' \n      },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { name, description, price, image_url, category } = body;\n\n    if (!name || !description || !price || price <= 0) {\n      return NextResponse.json(\n        { \n          success: false, \n          error: 'Name, description, and price are required' \n        },\n        { status: 400 }\n      );\n    }\n\n    const query = `\n      INSERT INTO products (name, description, price, image_url, category)\n      VALUES ($1, $2, $3, $4, $5)\n      RETURNING id, name, description, price, image_url, category, created_at\n    `;\n    const result = await db.query(query, [name, description, price, image_url, category]);\n    \n    return NextResponse.json(\n      { \n        success: true, \n        data: result.rows[0] \n      },\n      { status: 201 }\n    );\n  } catch (error) {\n    console.error('Error creating product:', error);\n    return NextResponse.json(\n      { \n        success: false, \n        error: 'Internal server error' \n      },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEO,eAAe,IAAI,QAAqB;IAC7C,IAAI;QACF,mBAAmB;QACnB,MAAM,QAAQ,CAAC;;;;IAIf,CAAC;QACD,MAAM,SAAS,MAAM,uKAAE,CAAC,KAAK,CAAC;QAE9B,OAAO,0LAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM,OAAO,IAAI;QACnB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,0LAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;QACT,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG;QAE1D,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,SAAS,SAAS,GAAG;YACjD,OAAO,0LAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,OAAO;YACT,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,QAAQ,CAAC;;;;IAIf,CAAC;QACD,MAAM,SAAS,MAAM,uKAAE,CAAC,KAAK,CAAC,OAAO;YAAC;YAAM;YAAa;YAAO;YAAW;SAAS;QAEpF,OAAO,0LAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,MAAM,OAAO,IAAI,CAAC,EAAE;QACtB,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,0LAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;QACT,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}